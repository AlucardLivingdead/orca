<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <title>Coverage Report - orca.focus_tracking_presenter</title>
  <link title="Style" type="text/css" rel="stylesheet" href="trace2html.css"/>
  <script type="text/javascript" src="sortabletable.js"></script>
</head>

<body>
<h1>Coverage Report - orca.focus_tracking_presenter</h1>

<table id="summary" class="summary">
<thead>
  <tr><td>Module</td><td>Coverage %</td></tr>
</thead>
<tbody>
<tr class=even>
  <td class="moduleName">
    <a href="orca.focus_tracking_presenter.html">orca.focus_tracking_presenter</a></td>
  <td class="percent">
    <div class="coveragePercent">
      71%
    </div>
    <div class="coverageBar">
      <div class="inCoverageBar" style="width: 71%">
      </div>
    </div>
  </td>
</tr>

</tbody>
</table>
<script type="text/javascript">
var packageTable = new SortableTable(document.getElementById("summary"),
    ["String", "Percentage"]);
packageTable.sort(0);
</script>


<table class="srcCode">
<tbody>
<tr class="">
  <td class="nbLine">1</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Orca</pre></td>
</tr>
<tr class="">
  <td class="nbLine">2</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">3</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Copyright 2004-2007 Sun Microsystems Inc.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">4</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">5</td>
  <td class="nbHits"></td>
  <td class="src"><pre># This library is free software; you can redistribute it and/or</pre></td>
</tr>
<tr class="">
  <td class="nbLine">6</td>
  <td class="nbHits"></td>
  <td class="src"><pre># modify it under the terms of the GNU Library General Public</pre></td>
</tr>
<tr class="">
  <td class="nbLine">7</td>
  <td class="nbHits"></td>
  <td class="src"><pre># License as published by the Free Software Foundation; either</pre></td>
</tr>
<tr class="">
  <td class="nbLine">8</td>
  <td class="nbHits"></td>
  <td class="src"><pre># version 2 of the License, or (at your option) any later version.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">9</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">10</td>
  <td class="nbHits"></td>
  <td class="src"><pre># This library is distributed in the hope that it will be useful,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">11</td>
  <td class="nbHits"></td>
  <td class="src"><pre># but WITHOUT ANY WARRANTY; without even the implied warranty of</pre></td>
</tr>
<tr class="">
  <td class="nbLine">12</td>
  <td class="nbHits"></td>
  <td class="src"><pre># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</pre></td>
</tr>
<tr class="">
  <td class="nbLine">13</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Library General Public License for more details.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">14</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">15</td>
  <td class="nbHits"></td>
  <td class="src"><pre># You should have received a copy of the GNU Library General Public</pre></td>
</tr>
<tr class="">
  <td class="nbLine">16</td>
  <td class="nbHits"></td>
  <td class="src"><pre># License along with this library; if not, write to the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">17</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Free Software Foundation, Inc., 59 Temple Place - Suite 330,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">18</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Boston, MA 02111-1307, USA.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">19</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">20</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>"""Provides the FocusTrackingPresenter for Orca."""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">21</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">22</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>__id__        = "$Id: focus_tracking_presenter.py 2126 2007-03-06 21:35:17Z richb $"</pre></td>
</tr>
<tr class="">
  <td class="nbLine">23</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>__version__   = "$Revision: 2126 $"</pre></td>
</tr>
<tr class="">
  <td class="nbLine">24</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>__date__      = "$Date: 2007-03-06 13:35:17 -0800 (Tue, 06 Mar 2007) $"</pre></td>
</tr>
<tr class="">
  <td class="nbLine">25</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>__copyright__ = "Copyright (c) 2005-2007 Sun Microsystems Inc."</pre></td>
</tr>
<tr class="">
  <td class="nbLine">26</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>__license__   = "LGPL"</pre></td>
</tr>
<tr class="">
  <td class="nbLine">27</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">28</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import gobject</pre></td>
</tr>
<tr class="">
  <td class="nbLine">29</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import Queue</pre></td>
</tr>
<tr class="">
  <td class="nbLine">30</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import threading</pre></td>
</tr>
<tr class="">
  <td class="nbLine">31</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import time</pre></td>
</tr>
<tr class="">
  <td class="nbLine">32</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">33</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import atspi</pre></td>
</tr>
<tr class="">
  <td class="nbLine">34</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import braille</pre></td>
</tr>
<tr class="">
  <td class="nbLine">35</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import default</pre></td>
</tr>
<tr class="">
  <td class="nbLine">36</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import debug</pre></td>
</tr>
<tr class="">
  <td class="nbLine">37</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import input_event</pre></td>
</tr>
<tr class="">
  <td class="nbLine">38</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import orca_state</pre></td>
</tr>
<tr class="">
  <td class="nbLine">39</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import presentation_manager</pre></td>
</tr>
<tr class="">
  <td class="nbLine">40</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import rolenames</pre></td>
</tr>
<tr class="">
  <td class="nbLine">41</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import settings</pre></td>
</tr>
<tr class="">
  <td class="nbLine">42</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import speech</pre></td>
</tr>
<tr class="">
  <td class="nbLine">43</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">44</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>from orca_i18n import _ # for gettext support</pre></td>
</tr>
<tr class="">
  <td class="nbLine">45</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">46</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import CORBA</pre></td>
</tr>
<tr class="">
  <td class="nbLine">47</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">48</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>class FocusTrackingPresenter(presentation_manager.PresentationManager):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">49</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Maintain a set of scripts for all running applications, and</pre></td>
</tr>
<tr class="">
  <td class="nbLine">50</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    also keeps the notion of an activeScript.  All object events are</pre></td>
</tr>
<tr class="">
  <td class="nbLine">51</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    passed to the associated script for that application, regardless if</pre></td>
</tr>
<tr class="">
  <td class="nbLine">52</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    the application has keyboard focus or not.  All keyboard events are</pre></td>
</tr>
<tr class="">
  <td class="nbLine">53</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    passed to the active script only if it has indicated interest in the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">54</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    event."""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">55</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">56</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def __init__(self):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">57</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">58</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # Dictionary that keeps count of event listeners by type.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">59</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # This is a bit convoluted for now, but what happens is that</pre></td>
</tr>
<tr class="">
  <td class="nbLine">60</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # scripts tell the FocusTrackingPresenter to listen for</pre></td>
</tr>
<tr class="">
  <td class="nbLine">61</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # object events based on what they want, and the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">62</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # FocusTrackingPresenter then eventually passes them to the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">63</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # script.  Because both the FocusTrackingPresenter and scripts</pre></td>
</tr>
<tr class="">
  <td class="nbLine">64</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # are interested in object events, and the FocusTrackingPresenter</pre></td>
</tr>
<tr class="">
  <td class="nbLine">65</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # is what delves them out, we keep at most one listener to avoid</pre></td>
</tr>
<tr class="">
  <td class="nbLine">66</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # receiving the same event twice in a row.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">67</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">68</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self.registry        = atspi.Registry()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">69</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._knownScripts   = {}</pre></td>
</tr>
<tr class="">
  <td class="nbLine">70</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._knownAppSettings = {}</pre></td>
</tr>
<tr class="">
  <td class="nbLine">71</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._oldAppSettings = None</pre></td>
</tr>
<tr class="">
  <td class="nbLine">72</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._eventQueue     = Queue.Queue(0)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">73</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._gidleId        = 0</pre></td>
</tr>
<tr class="">
  <td class="nbLine">74</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._gidleLock      = threading.Lock()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">75</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self.noFocusTimestamp = 0.0</pre></td>
</tr>
<tr class="">
  <td class="nbLine">76</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">77</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        orca_state.activeScript = None</pre></td>
</tr>
<tr class="">
  <td class="nbLine">78</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">79</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        if settings.debugEventQueue:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">80</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            self._enqueueEventCount = 0</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">81</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            self._dequeueEventCount = 0</pre></td>
</tr>
<tr class="">
  <td class="nbLine">82</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">83</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    ########################################################################</pre></td>
</tr>
<tr class="">
  <td class="nbLine">84</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #                                                                      #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">85</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # METHODS FOR KEEPING TRACK OF LISTENERS REGISTERED WITH ATSPI         #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">86</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #                                                                      #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">87</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    ########################################################################</pre></td>
</tr>
<tr class="">
  <td class="nbLine">88</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">89</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def _registerEventListener(self, eventType):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">90</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Tells this module to listen for the given event type.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">91</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">92</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">93</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - eventType: the event type.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">94</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">95</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">96</td>
  <td class="nbHits">1537</td>
  <td class="src"><pre>        if self._listenerCounts.has_key(eventType):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">97</td>
  <td class="nbHits">1510</td>
  <td class="src"><pre>            self._listenerCounts[eventType] += 1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">98</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        else:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">99</td>
  <td class="nbHits">27</td>
  <td class="src"><pre>            self.registry.registerEventListener(self._enqueueEvent,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">100</td>
  <td class="nbHits">27</td>
  <td class="src"><pre>                                                eventType)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">101</td>
  <td class="nbHits">27</td>
  <td class="src"><pre>            self._listenerCounts[eventType] = 1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">102</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">103</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def _deregisterEventListener(self, eventType):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">104</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Tells this module to stop listening for the given event type.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">105</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">106</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">107</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - eventType: the event type.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">108</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">109</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">110</td>
  <td class="nbHits">1378</td>
  <td class="src"><pre>        self._listenerCounts[eventType] -= 1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">111</td>
  <td class="nbHits">1378</td>
  <td class="src"><pre>        if self._listenerCounts[eventType] == 0:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">112</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            self.registry.deregisterEventListener(self._enqueueEvent,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">113</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                                                  eventType)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">114</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            del self._listenerCounts[eventType]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">115</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">116</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def _registerEventListeners(self, script):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">117</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Tells the FocusTrackingPresenter to listen for all</pre></td>
</tr>
<tr class="">
  <td class="nbLine">118</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        the event types of interest to the script.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">119</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">120</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">121</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - script: the script.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">122</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">123</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">124</td>
  <td class="nbHits">1593</td>
  <td class="src"><pre>        for eventType in script.listeners.keys():</pre></td>
</tr>
<tr class="">
  <td class="nbLine">125</td>
  <td class="nbHits">1534</td>
  <td class="src"><pre>            self._registerEventListener(eventType)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">126</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">127</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def _deregisterEventListeners(self, script):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">128</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Tells the FocusTrackingPresenter to stop listening for all the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">129</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        event types of interest to the script.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">130</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">131</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">132</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - script: the script.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">133</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">134</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">135</td>
  <td class="nbHits">1431</td>
  <td class="src"><pre>        for eventType in script.listeners.keys():</pre></td>
</tr>
<tr class="">
  <td class="nbLine">136</td>
  <td class="nbHits">1378</td>
  <td class="src"><pre>            self._deregisterEventListener(eventType)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">137</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">138</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    ########################################################################</pre></td>
</tr>
<tr class="">
  <td class="nbLine">139</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #                                                                      #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">140</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # METHODS FOR KEEPING TRACK OF KNOWN SCRIPTS.                          #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">141</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #                                                                      #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">142</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    ########################################################################</pre></td>
</tr>
<tr class="">
  <td class="nbLine">143</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">144</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # The cache of the currently known scripts.  The key is the Python</pre></td>
</tr>
<tr class="">
  <td class="nbLine">145</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # Accessible application, and the value is the script for that app.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">146</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">147</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">148</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def _createScript(self, app):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">149</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """For the given application name, create a new script instance.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">150</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        We'll first see if a mapping from appName to module name exists.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">151</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        If it does, we use that.  If it doesn't, we try the app name.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">152</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        If all else fails, we fall back to the default script.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">153</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">154</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">155</td>
  <td class="nbHits">58</td>
  <td class="src"><pre>        script = None</pre></td>
</tr>
<tr class="">
  <td class="nbLine">156</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">157</td>
  <td class="nbHits">58</td>
  <td class="src"><pre>        if settings.enableCustomScripts:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">158</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # Look for custom scripts first.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">159</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">160</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # We'll use the LEVEL_FINEST level for debug output here as</pre></td>
</tr>
<tr class="">
  <td class="nbLine">161</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # it really isn't an error if the script cannot be found.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">162</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # But, sometimes a script cannot be "found" because it has</pre></td>
</tr>
<tr class="">
  <td class="nbLine">163</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # a syntax error in it, so we want to give script writers</pre></td>
</tr>
<tr class="">
  <td class="nbLine">164</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # a vehicle for debugging these types of things.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">165</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">166</td>
  <td class="nbHits">58</td>
  <td class="src"><pre>            scriptPackages = settings.scriptPackages</pre></td>
</tr>
<tr class="">
  <td class="nbLine">167</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">168</td>
  <td class="nbHits">58</td>
  <td class="src"><pre>            moduleName = settings.getScriptModuleName(app)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">169</td>
  <td class="nbHits">58</td>
  <td class="src"><pre>            module = None</pre></td>
</tr>
<tr class="">
  <td class="nbLine">170</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">171</td>
  <td class="nbHits">58</td>
  <td class="src"><pre>            if moduleName and len(moduleName):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">172</td>
  <td class="nbHits">150</td>
  <td class="src"><pre>                for package in scriptPackages:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">173</td>
  <td class="nbHits">116</td>
  <td class="src"><pre>                    if len(package):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">174</td>
  <td class="nbHits">116</td>
  <td class="src"><pre>                        name = package + "." + moduleName</pre></td>
</tr>
<tr class="">
  <td class="nbLine">175</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    else:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">176</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                        name = moduleName</pre></td>
</tr>
<tr class="">
  <td class="nbLine">177</td>
  <td class="nbHits">116</td>
  <td class="src"><pre>                    try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">178</td>
  <td class="nbHits">116</td>
  <td class="src"><pre>                        debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">179</td>
  <td class="nbHits">116</td>
  <td class="src"><pre>                                      "Looking for script at %s.py..." % name)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">180</td>
  <td class="nbHits">116</td>
  <td class="src"><pre>                        module = __import__(name,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">181</td>
  <td class="nbHits">116</td>
  <td class="src"><pre>                                            globals(),</pre></td>
</tr>
<tr class="">
  <td class="nbLine">182</td>
  <td class="nbHits">116</td>
  <td class="src"><pre>                                            locals(),</pre></td>
</tr>
<tr class="">
  <td class="nbLine">183</td>
  <td class="nbHits">116</td>
  <td class="src"><pre>                                            [''])</pre></td>
</tr>
<tr class="">
  <td class="nbLine">184</td>
  <td class="nbHits">24</td>
  <td class="src"><pre>                        debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">185</td>
  <td class="nbHits">24</td>
  <td class="src"><pre>                                      "...found %s.py" % name)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">186</td>
  <td class="nbHits">24</td>
  <td class="src"><pre>                        break</pre></td>
</tr>
<tr class="">
  <td class="nbLine">187</td>
  <td class="nbHits">92</td>
  <td class="src"><pre>                    except ImportError:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">188</td>
  <td class="nbHits">92</td>
  <td class="src"><pre>                        debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">189</td>
  <td class="nbHits">92</td>
  <td class="src"><pre>                                      "...could not find %s.py" % name)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">190</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    except:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">191</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                        debug.printException(debug.LEVEL_SEVERE)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">192</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                        debug.println(debug.LEVEL_SEVERE,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">193</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                                      "While attempting to import %s" % name)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">194</td>
  <td class="nbHits">58</td>
  <td class="src"><pre>            if module:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">195</td>
  <td class="nbHits">24</td>
  <td class="src"><pre>                try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">196</td>
  <td class="nbHits">24</td>
  <td class="src"><pre>                    script = module.Script(app)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">197</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                except:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">198</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    # We do not want the getScript method to fail.  If it does,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">199</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    # we want to let the script developer know what went wrong,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">200</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    # but we also want to move along without crashing Orca.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">201</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">202</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    debug.printException(debug.LEVEL_SEVERE)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">203</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">204</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # If there is no custom script for an application, try seeing if</pre></td>
</tr>
<tr class="">
  <td class="nbLine">205</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # there is a script for the toolkit of the application.  If there</pre></td>
</tr>
<tr class="">
  <td class="nbLine">206</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # is, then try to use it.  If there isn't, then fall back to the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">207</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # default script. Note that this search is restricted to the "orca"</pre></td>
</tr>
<tr class="">
  <td class="nbLine">208</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # package for now.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">209</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">210</td>
  <td class="nbHits">58</td>
  <td class="src"><pre>        if (not script) \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">211</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            and app \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">212</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            and app.__dict__.has_key("toolkitName") \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">213</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            and app.toolkitName:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">214</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">215</td>
  <td class="nbHits">10</td>
  <td class="src"><pre>            try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">216</td>
  <td class="nbHits">10</td>
  <td class="src"><pre>                debug.println(</pre></td>
</tr>
<tr class="">
  <td class="nbLine">217</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    debug.LEVEL_FINE,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">218</td>
  <td class="nbHits">10</td>
  <td class="src"><pre>                    "Looking for toolkit script %s.py..." % app.toolkitName)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">219</td>
  <td class="nbHits">10</td>
  <td class="src"><pre>                module = __import__(app.toolkitName,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">220</td>
  <td class="nbHits">10</td>
  <td class="src"><pre>                                    globals(),</pre></td>
</tr>
<tr class="">
  <td class="nbLine">221</td>
  <td class="nbHits">10</td>
  <td class="src"><pre>                                    locals(),</pre></td>
</tr>
<tr class="">
  <td class="nbLine">222</td>
  <td class="nbHits">10</td>
  <td class="src"><pre>                                    [''])</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">223</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                script = module.Script(app)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">224</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.println(debug.LEVEL_FINE,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">225</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                              "...found %s.py" % name)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">226</td>
  <td class="nbHits">10</td>
  <td class="src"><pre>            except ImportError:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">227</td>
  <td class="nbHits">10</td>
  <td class="src"><pre>                debug.println(</pre></td>
</tr>
<tr class="">
  <td class="nbLine">228</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    debug.LEVEL_FINE,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">229</td>
  <td class="nbHits">10</td>
  <td class="src"><pre>                    "...could not find %s.py" % app.toolkitName)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">230</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            except:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">231</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.printException(debug.LEVEL_SEVERE)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">232</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.println(</pre></td>
</tr>
<tr class="">
  <td class="nbLine">233</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    debug.LEVEL_SEVERE,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">234</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    "While attempting to import %s" % app.toolkitName)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">235</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">236</td>
  <td class="nbHits">58</td>
  <td class="src"><pre>        if not script:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">237</td>
  <td class="nbHits">34</td>
  <td class="src"><pre>            script = default.Script(app)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">238</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">239</td>
  <td class="nbHits">58</td>
  <td class="src"><pre>        return script</pre></td>
</tr>
<tr class="">
  <td class="nbLine">240</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">241</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def _getScript(self, app):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">242</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Get a script for an app (and make it if necessary).  This is used</pre></td>
</tr>
<tr class="">
  <td class="nbLine">243</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        instead of a simple calls to Script's constructor.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">244</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">245</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">246</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - app: the Python app</pre></td>
</tr>
<tr class="">
  <td class="nbLine">247</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">248</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Returns an instance of a Script.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">249</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">250</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">251</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # We might not know what the app is.  In this case, just defer</pre></td>
</tr>
<tr class="">
  <td class="nbLine">252</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # to the default script for support.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">253</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">254</td>
  <td class="nbHits">20598</td>
  <td class="src"><pre>        if not app:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">255</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>            if not self._defaultScript:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">256</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>                self._defaultScript = default.Script(None)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">257</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>                self._registerEventListeners(self._defaultScript)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">258</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>            script = self._defaultScript</pre></td>
</tr>
<tr class="">
  <td class="nbLine">259</td>
  <td class="nbHits">20597</td>
  <td class="src"><pre>        elif self._knownScripts.has_key(app):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">260</td>
  <td class="nbHits">20539</td>
  <td class="src"><pre>            script = self._knownScripts[app]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">261</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        else:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">262</td>
  <td class="nbHits">58</td>
  <td class="src"><pre>            script = self._createScript(app)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">263</td>
  <td class="nbHits">58</td>
  <td class="src"><pre>            self._knownScripts[app] = script</pre></td>
</tr>
<tr class="">
  <td class="nbLine">264</td>
  <td class="nbHits">58</td>
  <td class="src"><pre>            self._registerEventListeners(script)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">265</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">266</td>
  <td class="nbHits">20598</td>
  <td class="src"><pre>        return script</pre></td>
</tr>
<tr class="">
  <td class="nbLine">267</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">268</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def _reclaimScripts(self):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">269</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Compares the list of known scripts to the list of known apps,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">270</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        deleting any scripts as necessary.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">271</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">272</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">273</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # Sometimes the desktop can become unavailable.  This happens</pre></td>
</tr>
<tr class="">
  <td class="nbLine">274</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # often when synaptic is used to load new modules (see the bug</pre></td>
</tr>
<tr class="">
  <td class="nbLine">275</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # report http://bugzilla.gnome.org/show_bug.cgi?id=342022).</pre></td>
</tr>
<tr class="">
  <td class="nbLine">276</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # So...if this happens, we'll just move along.  The next</pre></td>
</tr>
<tr class="">
  <td class="nbLine">277</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # successful call to _reclaimScripts will reclaim anything we</pre></td>
</tr>
<tr class="">
  <td class="nbLine">278</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # didn't reclaim this time.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">279</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">280</td>
  <td class="nbHits">96</td>
  <td class="src"><pre>        try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">281</td>
  <td class="nbHits">96</td>
  <td class="src"><pre>            apps = []</pre></td>
</tr>
<tr class="">
  <td class="nbLine">282</td>
  <td class="nbHits">96</td>
  <td class="src"><pre>            desktop = self.registry.desktop</pre></td>
</tr>
<tr class="">
  <td class="nbLine">283</td>
  <td class="nbHits">1261</td>
  <td class="src"><pre>            for i in range(0, desktop.childCount):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">284</td>
  <td class="nbHits">1165</td>
  <td class="src"><pre>                acc = desktop.getChildAtIndex(i)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">285</td>
  <td class="nbHits">1165</td>
  <td class="src"><pre>                app = atspi.Accessible.makeAccessible(acc)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">286</td>
  <td class="nbHits">1165</td>
  <td class="src"><pre>                if app:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">287</td>
  <td class="nbHits">1159</td>
  <td class="src"><pre>                    apps.insert(0, app)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">288</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">289</td>
  <td class="nbHits">463</td>
  <td class="src"><pre>            for app in self._knownScripts.keys():</pre></td>
</tr>
<tr class="">
  <td class="nbLine">290</td>
  <td class="nbHits">367</td>
  <td class="src"><pre>                if apps.count(app) == 0:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">291</td>
  <td class="nbHits">53</td>
  <td class="src"><pre>                    script = self._knownScripts[app]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">292</td>
  <td class="nbHits">53</td>
  <td class="src"><pre>                    self._deregisterEventListeners(script)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">293</td>
  <td class="nbHits">53</td>
  <td class="src"><pre>                    del self._knownScripts[app]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">294</td>
  <td class="nbHits">53</td>
  <td class="src"><pre>                    del script</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">295</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        except:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">296</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.printException(debug.LEVEL_FINEST)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">297</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">298</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    ########################################################################</pre></td>
</tr>
<tr class="">
  <td class="nbLine">299</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #                                                                      #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">300</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # METHODS FOR KEEPING TRACK OF APPLICATION SETTINGS.                   #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">301</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #                                                                      #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">302</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    ########################################################################</pre></td>
</tr>
<tr class="">
  <td class="nbLine">303</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">304</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def loadAppSettings(self, app):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">305</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Load the users application specific settings for an app.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">306</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">307</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">308</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - app: the Python app</pre></td>
</tr>
<tr class="">
  <td class="nbLine">309</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">310</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">311</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>        settingsPackages = settings.settingsPackages</pre></td>
</tr>
<tr class="">
  <td class="nbLine">312</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>        moduleName = settings.getScriptModuleName(app)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">313</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>        module = None</pre></td>
</tr>
<tr class="">
  <td class="nbLine">314</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">315</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>        if moduleName and len(moduleName):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">316</td>
  <td class="nbHits">388</td>
  <td class="src"><pre>            for package in settingsPackages:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">317</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>                if len(package):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">318</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>                    name = package + "." + moduleName</pre></td>
</tr>
<tr class="">
  <td class="nbLine">319</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                else:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">320</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    name = moduleName</pre></td>
</tr>
<tr class="">
  <td class="nbLine">321</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>                try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">322</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>                    debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">323</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>                                  "Looking for settings at %s.py..." % name)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">324</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>                    if self. _knownAppSettings.has_key(name):</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">325</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                        reload(self._knownAppSettings[name])</pre></td>
</tr>
<tr class="">
  <td class="nbLine">326</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    else:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">327</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>                        self._knownAppSettings[name] = \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">328</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                            __import__(name, globals(), locals(), [''])</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">329</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">330</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                                  "...found %s.py" % name)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">331</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    break</pre></td>
</tr>
<tr class="">
  <td class="nbLine">332</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>                except ImportError:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">333</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>                    debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">334</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>                                  "...could not find %s.py" % name)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">335</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">336</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    ########################################################################</pre></td>
</tr>
<tr class="">
  <td class="nbLine">337</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #                                                                      #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">338</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # METHODS FOR PRE-PROCESSING AND MASSAGING AT-SPI OBJECT EVENTS        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">339</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # for processing by the rest of Orca.                                  #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">340</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #                                                                      #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">341</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    ########################################################################</pre></td>
</tr>
<tr class="">
  <td class="nbLine">342</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">343</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def _processKeyboardEvent(self, keyboardEvent):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">344</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Processes the given keyboard event based on the keybinding from the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">345</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        currently active script.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">346</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">347</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">348</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - keyboardEvent: an instance of input_event.KeyboardEvent</pre></td>
</tr>
<tr class="">
  <td class="nbLine">349</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">350</td>
  <td class="nbHits">154</td>
  <td class="src"><pre>        if orca_state.activeScript:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">351</td>
  <td class="nbHits">154</td>
  <td class="src"><pre>            try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">352</td>
  <td class="nbHits">154</td>
  <td class="src"><pre>                orca_state.activeScript.processKeyboardEvent(keyboardEvent)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">353</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            except:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">354</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.printException(debug.LEVEL_WARNING)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">355</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.printStack(debug.LEVEL_WARNING)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">356</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">357</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def _processBrailleEvent(self, brailleEvent):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">358</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Called whenever a cursor key is pressed on the Braille display.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">359</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">360</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">361</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - brailleEvent: an instance of input_event.BrailleEvent</pre></td>
</tr>
<tr class="">
  <td class="nbLine">362</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">363</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        if orca_state.activeScript:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">364</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            try:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">365</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                orca_state.activeScript.processBrailleEvent(brailleEvent)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">366</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            except:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">367</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.printException(debug.LEVEL_WARNING)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">368</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.printStack(debug.LEVEL_WARNING)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">369</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">370</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def _processObjectEvent(self, event):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">371</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Handles all events destined for scripts.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">372</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">373</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">374</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - e: an at-spi event.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">375</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">376</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">377</td>
  <td class="nbHits">20864</td>
  <td class="src"><pre>        debug.printObjectEvent(debug.LEVEL_FINEST, event)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">378</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">379</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # [[[TODO: WDW - HACK to prevent gnome-panel from killing</pre></td>
</tr>
<tr class="">
  <td class="nbLine">380</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # itself.  It seems to do so after it issues some tool tip</pre></td>
</tr>
<tr class="">
  <td class="nbLine">381</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # events and Orca attempts to process them.  We're not really</pre></td>
</tr>
<tr class="">
  <td class="nbLine">382</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # doing anything with tool tips right now, so we just ignore</pre></td>
</tr>
<tr class="">
  <td class="nbLine">383</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # them.  Note that this is just a bandaid to the problem.  We</pre></td>
</tr>
<tr class="">
  <td class="nbLine">384</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # should do something better.  Please refer to bug 368626</pre></td>
</tr>
<tr class="">
  <td class="nbLine">385</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # http://bugzilla.gnome.org/show_bug.cgi?id=368626 to follow</pre></td>
</tr>
<tr class="">
  <td class="nbLine">386</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # this problem.]]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">387</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">388</td>
  <td class="nbHits">20864</td>
  <td class="src"><pre>        try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">389</td>
  <td class="nbHits">20864</td>
  <td class="src"><pre>            if event.source.role == rolenames.ROLE_TOOL_TIP:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">390</td>
  <td class="nbHits">6</td>
  <td class="src"><pre>                return</pre></td>
</tr>
<tr class="">
  <td class="nbLine">391</td>
  <td class="nbHits">3</td>
  <td class="src"><pre>        except:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">392</td>
  <td class="nbHits">3</td>
  <td class="src"><pre>            pass</pre></td>
</tr>
<tr class="">
  <td class="nbLine">393</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">394</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # Reclaim (delete) any scripts when desktop children go away.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">395</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # The idea here is that a desktop child is an app. We also</pre></td>
</tr>
<tr class="">
  <td class="nbLine">396</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # generally do not like object:children-changed:remove events,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">397</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # either.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">398</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">399</td>
  <td class="nbHits">20858</td>
  <td class="src"><pre>        if event.type == "object:children-changed:remove":</pre></td>
</tr>
<tr class="">
  <td class="nbLine">400</td>
  <td class="nbHits">96</td>
  <td class="src"><pre>            if event.source == atspi.Accessible.makeAccessible(</pre></td>
</tr>
<tr class="">
  <td class="nbLine">401</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                                   self.registry.desktop):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">402</td>
  <td class="nbHits">96</td>
  <td class="src"><pre>                self._reclaimScripts()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">403</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                #import gc</pre></td>
</tr>
<tr class="">
  <td class="nbLine">404</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                #gc.collect()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">405</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                #print "In process, garbage:", gc.garbage</pre></td>
</tr>
<tr class="">
  <td class="nbLine">406</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                #for obj in gc.garbage:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">407</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                #    print "   referrers:", obj, gc.get_referrers(obj)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">408</td>
  <td class="nbHits">96</td>
  <td class="src"><pre>            return</pre></td>
</tr>
<tr class="">
  <td class="nbLine">409</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">410</td>
  <td class="nbHits">20762</td>
  <td class="src"><pre>        try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">411</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # We don't want to touch a defunct object.  It's useless and it</pre></td>
</tr>
<tr class="">
  <td class="nbLine">412</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # can cause hangs.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">413</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">414</td>
  <td class="nbHits">20762</td>
  <td class="src"><pre>            if event.source \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">415</td>
  <td class="nbHits"></td>
  <td class="src"><pre>               and event.source.state.count(atspi.Accessibility.STATE_DEFUNCT):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">416</td>
  <td class="nbHits">359</td>
  <td class="src"><pre>                debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">417</td>
  <td class="nbHits">359</td>
  <td class="src"><pre>                              "IGNORING DEFUNCT OBJECT")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">418</td>
  <td class="nbHits">359</td>
  <td class="src"><pre>                atspi.Accessible.deleteAccessible(event.source)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">419</td>
  <td class="nbHits">359</td>
  <td class="src"><pre>                return</pre></td>
</tr>
<tr class="">
  <td class="nbLine">420</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">421</td>
  <td class="nbHits">20403</td>
  <td class="src"><pre>            if (not debug.eventDebugFilter) \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">422</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                or (debug.eventDebugFilter \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">423</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    and debug.eventDebugFilter.match(event.type)):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">424</td>
  <td class="nbHits">20403</td>
  <td class="src"><pre>                debug.printDetails(debug.LEVEL_FINEST, "    ", event.source)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">425</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">426</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        except CORBA.COMM_FAILURE:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">427</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.printException(debug.LEVEL_WARNING)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">428</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">429</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                          "COMM_FAILURE above while processing event: " \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">430</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                          + event.type)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">431</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        except CORBA.OBJECT_NOT_EXIST:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">432</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.printException(debug.LEVEL_WARNING)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">433</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.println(debug.LEVEL_WARNING,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">434</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                          "OBJECT_NOT_EXIST above while processing event: " \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">435</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                          + event.type)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">436</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            atspi.Accessible.deleteAccessible(event.source)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">437</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            return</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">438</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        except:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">439</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.printException(debug.LEVEL_WARNING)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">440</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            return</pre></td>
</tr>
<tr class="">
  <td class="nbLine">441</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">442</td>
  <td class="nbHits">20403</td>
  <td class="src"><pre>        if not event.source:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">443</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.println(debug.LEVEL_WARNING,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">444</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                          "ERROR: received an event with no source.")</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">445</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            return</pre></td>
</tr>
<tr class="">
  <td class="nbLine">446</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">447</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # We can sometimes get COMM_FAILURES even if the object has not</pre></td>
</tr>
<tr class="">
  <td class="nbLine">448</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # gone away.  This happens a lot with the Java access bridge.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">449</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # So...we will try a few times before giving up.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">450</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">451</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # [[[TODO: WDW - might want to consider re-introducing the reload</pre></td>
</tr>
<tr class="">
  <td class="nbLine">452</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # feature of scripts somewhere around here.  I pulled it out as</pre></td>
</tr>
<tr class="">
  <td class="nbLine">453</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # part of the big refactor to make scripts object-oriented. Logged</pre></td>
</tr>
<tr class="">
  <td class="nbLine">454</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # as bugzilla bug 319777.]]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">455</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">456</td>
  <td class="nbHits">20403</td>
  <td class="src"><pre>        retryCount = 0</pre></td>
</tr>
<tr class="">
  <td class="nbLine">457</td>
  <td class="nbHits">20403</td>
  <td class="src"><pre>        oldLocusOfFocus = orca_state.locusOfFocus</pre></td>
</tr>
<tr class="">
  <td class="nbLine">458</td>
  <td class="nbHits">20403</td>
  <td class="src"><pre>        try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">459</td>
  <td class="nbHits">20403</td>
  <td class="src"><pre>            s = self._getScript(event.source.app)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">460</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        except:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">461</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            s = None</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">462</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.printException(debug.LEVEL_WARNING)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">463</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.println(debug.LEVEL_WARNING,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">464</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                          "ERROR: received an event, but Script is None")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">465</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">466</td>
  <td class="nbHits">20585</td>
  <td class="src"><pre>        while s and retryCount &lt;= s.commFailureAttemptLimit:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">467</td>
  <td class="nbHits">20555</td>
  <td class="src"><pre>            try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">468</td>
  <td class="nbHits">20555</td>
  <td class="src"><pre>                if not event.source.state.count( \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">469</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                                      atspi.Accessibility.STATE_ICONIFIED):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">470</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">471</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    # [[[TODO: WDW - HACK we look for frame that get</pre></td>
</tr>
<tr class="">
  <td class="nbLine">472</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    # focus: as a means to detect active scripts</pre></td>
</tr>
<tr class="">
  <td class="nbLine">473</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    # because yelp does this.  Actually, yelp is a bit</pre></td>
</tr>
<tr class="">
  <td class="nbLine">474</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    # odd in that it calls itself 'yelp' then changes</pre></td>
</tr>
<tr class="">
  <td class="nbLine">475</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    # its application name and id to the Gecko toolkit</pre></td>
</tr>
<tr class="">
  <td class="nbLine">476</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    # in use, and then issues a focus: event on the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">477</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    # main window, which is a frame.]]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">478</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">479</td>
  <td class="nbHits">20555</td>
  <td class="src"><pre>                    if (event.type == "window:activate") \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">480</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                       or ((event.type == "focus:") \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">481</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                           and (event.source.role == rolenames.ROLE_FRAME)):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">482</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">483</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        # We'll let someone else decide if it's important</pre></td>
</tr>
<tr class="">
  <td class="nbLine">484</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        # to stop speech or not.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">485</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        #speech.stop()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">486</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>                        orca_state.activeScript = \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">487</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                            self._getScript(event.source.app)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">488</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>                        debug.println(debug.LEVEL_FINE, "ACTIVE SCRIPT: " \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">489</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                                      + orca_state.activeScript.name)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">490</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">491</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        # If old ("factory") settings don't exist yet, save</pre></td>
</tr>
<tr class="">
  <td class="nbLine">492</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        # a set, else restore the old application settings.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">493</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">494</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>                        if not self._oldAppSettings:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">495</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>                            self._oldAppSettings = \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">496</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                                  orca_state.activeScript.saveOldAppSettings()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">497</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        else:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">498</td>
  <td class="nbHits">193</td>
  <td class="src"><pre>                            orca_state.activeScript.restoreOldAppSettings( \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">499</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                                                         self._oldAppSettings)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">500</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">501</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        # Load in the application specific settings for the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">502</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        # app for this event (if found).</pre></td>
</tr>
<tr class="">
  <td class="nbLine">503</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">504</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>                        appSettings = self.loadAppSettings(event.source.app)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">505</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">506</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        # Tell BrlTTY which commands we care about.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">507</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">508</td>
  <td class="nbHits">194</td>
  <td class="src"><pre>                        braille.setupKeyRanges(\</pre></td>
</tr>
<tr class="">
  <td class="nbLine">509</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                            orca_state.activeScript.brailleBindings.keys())</pre></td>
</tr>
<tr class="">
  <td class="nbLine">510</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">511</td>
  <td class="nbHits">20555</td>
  <td class="src"><pre>                    s.processObjectEvent(event)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">512</td>
  <td class="nbHits">20350</td>
  <td class="src"><pre>                    if retryCount:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">513</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>                        debug.println(debug.LEVEL_WARNING,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">514</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>                                      "  SUCCEEDED AFTER %d TRIES" % retryCount)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">515</td>
  <td class="nbHits">20350</td>
  <td class="src"><pre>                break</pre></td>
</tr>
<tr class="">
  <td class="nbLine">516</td>
  <td class="nbHits">205</td>
  <td class="src"><pre>            except CORBA.COMM_FAILURE:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">517</td>
  <td class="nbHits">182</td>
  <td class="src"><pre>                debug.printException(debug.LEVEL_WARNING)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">518</td>
  <td class="nbHits">182</td>
  <td class="src"><pre>                debug.println(debug.LEVEL_WARNING,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">519</td>
  <td class="nbHits">182</td>
  <td class="src"><pre>                              "COMM_FAILURE above while processing: " \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">520</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                              + event.type)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">521</td>
  <td class="nbHits">182</td>
  <td class="src"><pre>                retryCount += 1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">522</td>
  <td class="nbHits">182</td>
  <td class="src"><pre>                if retryCount &lt;= s.commFailureAttemptLimit:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">523</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    # We want the old locus of focus to be reset so</pre></td>
</tr>
<tr class="">
  <td class="nbLine">524</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    # the proper stuff will be spoken if the locus</pre></td>
</tr>
<tr class="">
  <td class="nbLine">525</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    # of focus changed during our last attempt at</pre></td>
</tr>
<tr class="">
  <td class="nbLine">526</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    # handling this event.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">527</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">528</td>
  <td class="nbHits">152</td>
  <td class="src"><pre>                    orca_state.locusOfFocus = oldLocusOfFocus</pre></td>
</tr>
<tr class="">
  <td class="nbLine">529</td>
  <td class="nbHits">152</td>
  <td class="src"><pre>                    debug.println(debug.LEVEL_WARNING,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">530</td>
  <td class="nbHits">152</td>
  <td class="src"><pre>                                  "  TRYING AGAIN (%d)" % retryCount)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">531</td>
  <td class="nbHits">152</td>
  <td class="src"><pre>                    time.sleep(s.commFailureWaitTime)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">532</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                else:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">533</td>
  <td class="nbHits">30</td>
  <td class="src"><pre>                    debug.println(debug.LEVEL_WARNING,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">534</td>
  <td class="nbHits">30</td>
  <td class="src"><pre>                                  "  GIVING UP AFTER %d TRIES" \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">535</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                                  % (retryCount - 1))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">536</td>
  <td class="nbHits">30</td>
  <td class="src"><pre>                    atspi.Accessible.deleteAccessible(event.source)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">537</td>
  <td class="nbHits">23</td>
  <td class="src"><pre>            except:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">538</td>
  <td class="nbHits">23</td>
  <td class="src"><pre>                debug.printException(debug.LEVEL_WARNING)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">539</td>
  <td class="nbHits">23</td>
  <td class="src"><pre>                break</pre></td>
</tr>
<tr class="">
  <td class="nbLine">540</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">541</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def _enqueueEvent(self, e):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">542</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Handles all events destined for scripts.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">543</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">544</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">545</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - e: an at-spi event.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">546</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">547</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">548</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # Uncomment these lines if you want to see what it's like without</pre></td>
</tr>
<tr class="">
  <td class="nbLine">549</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # the queue.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">550</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">551</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #if isinstance(e, input_event.KeyboardEvent):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">552</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #    self._processKeyboardEvent(e)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">553</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #elif isinstance(e, input_event.BrailleEvent):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">554</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #    self._processBrailleEvent(e)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">555</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #else:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">556</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #    self._processObjectEvent(atspi.Event(e))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">557</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #return</pre></td>
</tr>
<tr class="">
  <td class="nbLine">558</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">559</td>
  <td class="nbHits">27120</td>
  <td class="src"><pre>        if settings.debugEventQueue:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">560</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            if self._enqueueEventCount:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">561</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.println(debug.LEVEL_ALL,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">562</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                              "focus_tracking_presenter._enqueueEvent has " \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">563</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                              "been entered before exiting (count = %d)" \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">564</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                              % self._enqueueEventCount)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">565</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            self._enqueueEventCount += 1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">566</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">567</td>
  <td class="nbHits">27120</td>
  <td class="src"><pre>        event = None</pre></td>
</tr>
<tr class="">
  <td class="nbLine">568</td>
  <td class="nbHits">27120</td>
  <td class="src"><pre>        if isinstance(e, input_event.KeyboardEvent):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">569</td>
  <td class="nbHits">154</td>
  <td class="src"><pre>            if e.type == atspi.Accessibility.KEY_PRESSED_EVENT:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">570</td>
  <td class="nbHits">77</td>
  <td class="src"><pre>                debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">571</td>
  <td class="nbHits">77</td>
  <td class="src"><pre>                              "----------&gt; QUEUEING KEYPRESS '%s' (%d)"</pre></td>
</tr>
<tr class="">
  <td class="nbLine">572</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                              % (e.event_string, e.hw_code))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">573</td>
  <td class="nbHits">77</td>
  <td class="src"><pre>            elif e.type == atspi.Accessibility.KEY_RELEASED_EVENT:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">574</td>
  <td class="nbHits">77</td>
  <td class="src"><pre>                debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">575</td>
  <td class="nbHits">77</td>
  <td class="src"><pre>                              "----------&gt; QUEUEING KEYRELEASE '%s' (%d)"</pre></td>
</tr>
<tr class="">
  <td class="nbLine">576</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                              % (e.event_string, e.hw_code))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">577</td>
  <td class="nbHits">154</td>
  <td class="src"><pre>            event = e</pre></td>
</tr>
<tr class="">
  <td class="nbLine">578</td>
  <td class="nbHits">26966</td>
  <td class="src"><pre>        elif isinstance(e, input_event.BrailleEvent):</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">579</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">580</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                          "----------&gt; QUEUEING BRAILLE COMMAND %d" % e.event)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">581</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            event = e</pre></td>
</tr>
<tr class="">
  <td class="nbLine">582</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        else:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">583</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # We ignore defunct objects and let the atspi module take</pre></td>
</tr>
<tr class="">
  <td class="nbLine">584</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # care of them for us.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">585</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">586</td>
  <td class="nbHits">26966</td>
  <td class="src"><pre>            if (e.type == "object:state-changed:defunct"):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">587</td>
  <td class="nbHits">1490</td>
  <td class="src"><pre>                if settings.debugEventQueue:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">588</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    self._enqueueEventCount -= 1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">589</td>
  <td class="nbHits">1490</td>
  <td class="src"><pre>                return</pre></td>
</tr>
<tr class="">
  <td class="nbLine">590</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">591</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # We also generally do not like</pre></td>
</tr>
<tr class="">
  <td class="nbLine">592</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # object:property-change:accessible-parent events because</pre></td>
</tr>
<tr class="">
  <td class="nbLine">593</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # they indicate something is now whacked with the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">594</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # hierarchy, so we just ignore them and let the atspi</pre></td>
</tr>
<tr class="">
  <td class="nbLine">595</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # module take care of it for us.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">596</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">597</td>
  <td class="nbHits">25476</td>
  <td class="src"><pre>            if e.type == "object:property-change:accessible-parent":</pre></td>
</tr>
<tr class="">
  <td class="nbLine">598</td>
  <td class="nbHits">2211</td>
  <td class="src"><pre>                if settings.debugEventQueue:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">599</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    self._enqueueEventCount -= 1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">600</td>
  <td class="nbHits">2211</td>
  <td class="src"><pre>                return</pre></td>
</tr>
<tr class="">
  <td class="nbLine">601</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">602</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # At this point in time, we only care when objects are</pre></td>
</tr>
<tr class="">
  <td class="nbLine">603</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # removed from the desktop.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">604</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">605</td>
  <td class="nbHits">23265</td>
  <td class="src"><pre>            if (e.type == "object:children-changed:remove") \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">606</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                and (e.source != self.registry.desktop):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">607</td>
  <td class="nbHits">2370</td>
  <td class="src"><pre>                if settings.debugEventQueue:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">608</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    self._enqueueEventCount -= 1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">609</td>
  <td class="nbHits">2370</td>
  <td class="src"><pre>                return</pre></td>
</tr>
<tr class="">
  <td class="nbLine">610</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">611</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # We create the event here because it will ref everything</pre></td>
</tr>
<tr class="">
  <td class="nbLine">612</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # we want it to ref, thus allowing things to survive until</pre></td>
</tr>
<tr class="">
  <td class="nbLine">613</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # they are processed on the gidle thread.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">614</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">615</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # If the event doesn't have a source or that source is not marked</pre></td>
</tr>
<tr class="">
  <td class="nbLine">616</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # valid, then we don't care about this event. Just return.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">617</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">618</td>
  <td class="nbHits">20895</td>
  <td class="src"><pre>            event = atspi.Event(e)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">619</td>
  <td class="nbHits">20895</td>
  <td class="src"><pre>            if not event.source or not event.source.valid:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">620</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">621</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                      "---------&gt; IGNORING INVALID EVENT %s" % e.type)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">622</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                if settings.debugEventQueue:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">623</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    self._enqueueEventCount -= 1</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">624</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                return</pre></td>
</tr>
<tr class="">
  <td class="nbLine">625</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">626</td>
  <td class="nbHits">20895</td>
  <td class="src"><pre>            if (not debug.eventDebugFilter) \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">627</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                or (debug.eventDebugFilter \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">628</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    and debug.eventDebugFilter.match(e.type)):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">629</td>
  <td class="nbHits">20895</td>
  <td class="src"><pre>                debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">630</td>
  <td class="nbHits">20895</td>
  <td class="src"><pre>                              "---------&gt; QUEUEING EVENT %s" % e.type)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">631</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">632</td>
  <td class="nbHits">21049</td>
  <td class="src"><pre>        if event:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">633</td>
  <td class="nbHits">21049</td>
  <td class="src"><pre>            if settings.debugEventQueue:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">634</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.println(debug.LEVEL_ALL,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">635</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                              "           acquiring lock...")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">636</td>
  <td class="nbHits">21049</td>
  <td class="src"><pre>            self._gidleLock.acquire()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">637</td>
  <td class="nbHits">21049</td>
  <td class="src"><pre>            if settings.debugEventQueue:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">638</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.println(debug.LEVEL_ALL,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">639</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                              "           ...acquired")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">640</td>
  <td class="nbHits">21049</td>
  <td class="src"><pre>            if settings.debugEventQueue:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">641</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.println(debug.LEVEL_ALL,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">642</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                              "           calling queue.put...")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">643</td>
  <td class="nbHits">21049</td>
  <td class="src"><pre>            if settings.debugEventQueue:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">644</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.println(debug.LEVEL_ALL,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">645</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                              "           (full=%s)" % self._eventQueue.full())</pre></td>
</tr>
<tr class="">
  <td class="nbLine">646</td>
  <td class="nbHits">21049</td>
  <td class="src"><pre>            self._eventQueue.put(event)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">647</td>
  <td class="nbHits">21049</td>
  <td class="src"><pre>            if settings.debugEventQueue:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">648</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.println(debug.LEVEL_ALL,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">649</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                              "           ...put complete")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">650</td>
  <td class="nbHits">21049</td>
  <td class="src"><pre>            if not self._gidleId:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">651</td>
  <td class="nbHits">4009</td>
  <td class="src"><pre>                if settings.gilSleepTime:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">652</td>
  <td class="nbHits">4009</td>
  <td class="src"><pre>                    time.sleep(settings.gilSleepTime)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">653</td>
  <td class="nbHits">4009</td>
  <td class="src"><pre>                self._gidleId = gobject.idle_add(self._dequeueEvent)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">654</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">655</td>
  <td class="nbHits">21049</td>
  <td class="src"><pre>            if settings.debugEventQueue:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">656</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.println(debug.LEVEL_ALL,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">657</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                              "           releasing lock...")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">658</td>
  <td class="nbHits">21049</td>
  <td class="src"><pre>            self._gidleLock.release()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">659</td>
  <td class="nbHits">21049</td>
  <td class="src"><pre>            if settings.debugEventQueue:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">660</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.println(debug.LEVEL_ALL,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">661</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                              "           ...released")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">662</td>
  <td class="nbHits">21049</td>
  <td class="src"><pre>        if settings.debugEventQueue:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">663</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            self._enqueueEventCount -= 1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">664</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">665</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # [[[TODO: HACK - on some hangs, we see the event queue growing,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">666</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # but the thread to take the events off is hung.  We might be</pre></td>
</tr>
<tr class="">
  <td class="nbLine">667</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # able to 'recover' by quitting when we see this happen.]]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">668</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">669</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #if self._eventQueue.qsize() &gt; 500:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">670</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #    print "Looks like something has hung.  Here's the threads:"</pre></td>
</tr>
<tr class="">
  <td class="nbLine">671</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #    for someThread in threading.enumerate():</pre></td>
</tr>
<tr class="">
  <td class="nbLine">672</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #        print someThread.getName(), someThread.isAlive()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">673</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #    print "Quitting Orca."</pre></td>
</tr>
<tr class="">
  <td class="nbLine">674</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #    orca.shutdown()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">675</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">676</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def _dequeueEvent(self):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">677</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Handles all events destined for scripts.  Called by the GTK</pre></td>
</tr>
<tr class="">
  <td class="nbLine">678</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        idle thread.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">679</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">680</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">681</td>
  <td class="nbHits">21018</td>
  <td class="src"><pre>        rerun = True</pre></td>
</tr>
<tr class="">
  <td class="nbLine">682</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">683</td>
  <td class="nbHits">21018</td>
  <td class="src"><pre>        if settings.debugEventQueue:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">684</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.println(debug.LEVEL_ALL,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">685</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                          "Entering focus_tracking_presenter._dequeueEvent" \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">686</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                          + " %d" % self._dequeueEventCount)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">687</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            self._dequeueEventCount += 1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">688</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">689</td>
  <td class="nbHits">21018</td>
  <td class="src"><pre>        try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">690</td>
  <td class="nbHits">21018</td>
  <td class="src"><pre>            event = self._eventQueue.get_nowait()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">691</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">692</td>
  <td class="nbHits">21018</td>
  <td class="src"><pre>            if isinstance(event, input_event.KeyboardEvent):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">693</td>
  <td class="nbHits">154</td>
  <td class="src"><pre>                if event.type == atspi.Accessibility.KEY_PRESSED_EVENT:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">694</td>
  <td class="nbHits">77</td>
  <td class="src"><pre>                    debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">695</td>
  <td class="nbHits">77</td>
  <td class="src"><pre>                                  "DEQUEUED KEYPRESS '%s' (%d) &lt;----------" \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">696</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                                  % (event.event_string, event.hw_code))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">697</td>
  <td class="nbHits">77</td>
  <td class="src"><pre>                    pressRelease = "PRESS"</pre></td>
</tr>
<tr class="">
  <td class="nbLine">698</td>
  <td class="nbHits">77</td>
  <td class="src"><pre>                elif event.type == atspi.Accessibility.KEY_RELEASED_EVENT:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">699</td>
  <td class="nbHits">77</td>
  <td class="src"><pre>                    debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">700</td>
  <td class="nbHits">77</td>
  <td class="src"><pre>                                  "DEQUEUED KEYRELEASE '%s' (%d) &lt;----------" \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">701</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                                  % (event.event_string, event.hw_code))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">702</td>
  <td class="nbHits">77</td>
  <td class="src"><pre>                    pressRelease = "RELEASE"</pre></td>
</tr>
<tr class="">
  <td class="nbLine">703</td>
  <td class="nbHits">154</td>
  <td class="src"><pre>                debug.println(debug.eventDebugLevel,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">704</td>
  <td class="nbHits">154</td>
  <td class="src"><pre>                              "\nvvvvv PROCESS KEY %s EVENT %s vvvvv"\</pre></td>
</tr>
<tr class="">
  <td class="nbLine">705</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                              % (pressRelease, event.event_string))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">706</td>
  <td class="nbHits">154</td>
  <td class="src"><pre>                self._processKeyboardEvent(event)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">707</td>
  <td class="nbHits">154</td>
  <td class="src"><pre>                debug.println(debug.eventDebugLevel,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">708</td>
  <td class="nbHits">154</td>
  <td class="src"><pre>                              "\n^^^^^ PROCESS KEY %s EVENT %s ^^^^^"\</pre></td>
</tr>
<tr class="">
  <td class="nbLine">709</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                              % (pressRelease, event.event_string))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">710</td>
  <td class="nbHits">20864</td>
  <td class="src"><pre>            elif isinstance(event, input_event.BrailleEvent):</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">711</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">712</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                              "DEQUEUED BRAILLE COMMAND %d &lt;----------" \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">713</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                              % event.event)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">714</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.println(debug.eventDebugLevel,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">715</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                              "\nvvvvv PROCESS BRAILLE EVENT %d vvvvv"\</pre></td>
</tr>
<tr class="">
  <td class="nbLine">716</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                              % event.event)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">717</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                self._processBrailleEvent(event)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">718</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.println(debug.eventDebugLevel,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">719</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                              "\n^^^^^ PROCESS BRAILLE EVENT %d ^^^^^"\</pre></td>
</tr>
<tr class="">
  <td class="nbLine">720</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                              % event.event)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">721</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            else:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">722</td>
  <td class="nbHits">20864</td>
  <td class="src"><pre>                if (not debug.eventDebugFilter) \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">723</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    or (debug.eventDebugFilter \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">724</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        and debug.eventDebugFilter.match(event.type)):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">725</td>
  <td class="nbHits">20864</td>
  <td class="src"><pre>                    debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">726</td>
  <td class="nbHits">20864</td>
  <td class="src"><pre>                                  "DEQUEUED EVENT %s &lt;----------" \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">727</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                                  % event.type)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">728</td>
  <td class="nbHits">20864</td>
  <td class="src"><pre>                    debug.println(debug.eventDebugLevel,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">729</td>
  <td class="nbHits">20864</td>
  <td class="src"><pre>                                  "\nvvvvv PROCESS OBJECT EVENT %s vvvvv" \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">730</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                                  % event.type)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">731</td>
  <td class="nbHits">20864</td>
  <td class="src"><pre>                self._processObjectEvent(event)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">732</td>
  <td class="nbHits">20864</td>
  <td class="src"><pre>                if (not debug.eventDebugFilter) \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">733</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    or (debug.eventDebugFilter \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">734</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        and debug.eventDebugFilter.match(event.type)):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">735</td>
  <td class="nbHits">20864</td>
  <td class="src"><pre>                    debug.println(debug.eventDebugLevel,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">736</td>
  <td class="nbHits">20864</td>
  <td class="src"><pre>                                  "^^^^^ PROCESS OBJECT EVENT %s ^^^^^\n" \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">737</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                                  % event.type)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">738</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">739</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # [[[TODO: HACK - it would seem logical to only do this if we</pre></td>
</tr>
<tr class="">
  <td class="nbLine">740</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # discover the queue is empty, but this inroduces a hang for</pre></td>
</tr>
<tr class="">
  <td class="nbLine">741</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # some reason if done inside an acquire/release block for a</pre></td>
</tr>
<tr class="">
  <td class="nbLine">742</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # lock.  So...we do it here.]]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">743</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">744</td>
  <td class="nbHits">21018</td>
  <td class="src"><pre>            noFocus = (not orca_state.activeScript) \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">745</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                      or ((not orca_state.locusOfFocus) \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">746</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                          and (self.noFocusTimestamp \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">747</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                               != orca_state.noFocusTimestamp))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">748</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">749</td>
  <td class="nbHits">21018</td>
  <td class="src"><pre>            self._gidleLock.acquire()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">750</td>
  <td class="nbHits">21018</td>
  <td class="src"><pre>            if self._eventQueue.empty():</pre></td>
</tr>
<tr class="">
  <td class="nbLine">751</td>
  <td class="nbHits">4008</td>
  <td class="src"><pre>                if noFocus:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">752</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    if settings.gilSleepTime:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">753</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                        time.sleep(settings.gilSleepTime)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">754</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    message = _("No focus")</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">755</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    if settings.brailleVerbosityLevel == \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">756</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        settings.VERBOSITY_LEVEL_VERBOSE:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">757</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                        braille.displayMessage(message)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">758</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    if settings.speechVerbosityLevel == \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">759</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        settings.VERBOSITY_LEVEL_VERBOSE:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">760</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                        speech.speak(message)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">761</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    self.noFocusTimestamp = orca_state.noFocusTimestamp</pre></td>
</tr>
<tr class="">
  <td class="nbLine">762</td>
  <td class="nbHits">4008</td>
  <td class="src"><pre>                self._gidleId = 0</pre></td>
</tr>
<tr class="">
  <td class="nbLine">763</td>
  <td class="nbHits">4008</td>
  <td class="src"><pre>                rerun = False # destroy and don't call again</pre></td>
</tr>
<tr class="">
  <td class="nbLine">764</td>
  <td class="nbHits">21018</td>
  <td class="src"><pre>            self._gidleLock.release()</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">765</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        except Queue.Empty:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">766</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.println(debug.LEVEL_SEVERE,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">767</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                          "focus_tracking_presenter:_dequeueEvent: " \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">768</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                          + " the event queue is empty!")</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">769</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        except:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">770</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.printException(debug.LEVEL_SEVERE)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">771</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">772</td>
  <td class="nbHits">21018</td>
  <td class="src"><pre>        if settings.debugEventQueue:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">773</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            self._dequeueEventCount -= 1</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">774</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.println(debug.LEVEL_ALL,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">775</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                          "Leaving focus_tracking_presenter._dequeueEvent" \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">776</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                          + " %d" % self._dequeueEventCount)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">777</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">778</td>
  <td class="nbHits">21018</td>
  <td class="src"><pre>        return rerun</pre></td>
</tr>
<tr class="">
  <td class="nbLine">779</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">780</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def processKeyboardEvent(self, keyboardEvent):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">781</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Processes the given keyboard event based on the keybinding from the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">782</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        currently active script. This method is called synchronously from the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">783</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        at-spi registry and should be performant.  In addition, it must return</pre></td>
</tr>
<tr class="">
  <td class="nbLine">784</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        True if it has consumed the event (and False if not).</pre></td>
</tr>
<tr class="">
  <td class="nbLine">785</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">786</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">787</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - keyboardEvent: an instance of input_event.KeyboardEvent</pre></td>
</tr>
<tr class="">
  <td class="nbLine">788</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">789</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Returns True if the event should be consumed.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">790</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">791</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">792</td>
  <td class="nbHits">3257</td>
  <td class="src"><pre>        if orca_state.activeScript \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">793</td>
  <td class="nbHits"></td>
  <td class="src"><pre>           and orca_state.activeScript.consumesKeyboardEvent(keyboardEvent):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">794</td>
  <td class="nbHits">154</td>
  <td class="src"><pre>            self._enqueueEvent(keyboardEvent)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">795</td>
  <td class="nbHits">154</td>
  <td class="src"><pre>            return True</pre></td>
</tr>
<tr class="">
  <td class="nbLine">796</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        else:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">797</td>
  <td class="nbHits">3103</td>
  <td class="src"><pre>            return False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">798</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">799</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def processBrailleEvent(self, brailleEvent):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">800</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Called whenever a cursor key is pressed on the Braille display.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">801</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">802</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">803</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - brailleEvent: an instance of input_event.BrailleEvent</pre></td>
</tr>
<tr class="">
  <td class="nbLine">804</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">805</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Returns True if the command was consumed; otherwise False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">806</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">807</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">808</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        if orca_state.activeScript \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">809</td>
  <td class="nbHits"></td>
  <td class="src"><pre>           and orca_state.activeScript.consumesBrailleEvent(brailleEvent):</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">810</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            self._enqueueEvent(brailleEvent)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">811</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            return True</pre></td>
</tr>
<tr class="">
  <td class="nbLine">812</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        else:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">813</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            return False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">814</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">815</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def locusOfFocusChanged(self, event, oldLocusOfFocus, newLocusOfFocus):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">816</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Called when the visual object with focus changes.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">817</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">818</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">819</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - event: if not None, the Event that caused the change</pre></td>
</tr>
<tr class="">
  <td class="nbLine">820</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - oldLocusOfFocus: Accessible that is the old locus of focus</pre></td>
</tr>
<tr class="">
  <td class="nbLine">821</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - newLocusOfFocus: Accessible that is the new locus of focus</pre></td>
</tr>
<tr class="">
  <td class="nbLine">822</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">823</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">824</td>
  <td class="nbHits">960</td>
  <td class="src"><pre>        if orca_state.activeScript:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">825</td>
  <td class="nbHits">960</td>
  <td class="src"><pre>            orca_state.activeScript.locusOfFocusChanged(event,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">826</td>
  <td class="nbHits">960</td>
  <td class="src"><pre>                                                        oldLocusOfFocus,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">827</td>
  <td class="nbHits">960</td>
  <td class="src"><pre>                                                        newLocusOfFocus)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">828</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">829</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def visualAppearanceChanged(self, event, obj):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">830</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Called when the visual appearance of an object changes.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">831</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        This method should not be called for objects whose visual</pre></td>
</tr>
<tr class="">
  <td class="nbLine">832</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        appearance changes solely because of focus -- locusOfFocusChanged</pre></td>
</tr>
<tr class="">
  <td class="nbLine">833</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        is used for that.  Instead, it is intended mostly for objects</pre></td>
</tr>
<tr class="">
  <td class="nbLine">834</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        whose notional 'value' has changed, such as a checkbox changing</pre></td>
</tr>
<tr class="">
  <td class="nbLine">835</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        state, a progress bar advancing, a slider moving, text inserted,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">836</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        caret moved, etc.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">837</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">838</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">839</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - event: if not None, the Event that caused this to happen</pre></td>
</tr>
<tr class="">
  <td class="nbLine">840</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - obj: the Accessible whose visual appearance changed.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">841</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">842</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">843</td>
  <td class="nbHits">685</td>
  <td class="src"><pre>        if orca_state.activeScript:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">844</td>
  <td class="nbHits">685</td>
  <td class="src"><pre>            orca_state.activeScript.visualAppearanceChanged(event, obj)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">845</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">846</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def activate(self):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">847</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Called when this presentation manager is activated."""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">848</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">849</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        speech.speak(_("Switching to focus tracking mode."))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">850</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">851</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._listenerCounts = {}</pre></td>
</tr>
<tr class="">
  <td class="nbLine">852</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._knownScripts   = {}</pre></td>
</tr>
<tr class="">
  <td class="nbLine">853</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._knownAppSettings = {}</pre></td>
</tr>
<tr class="">
  <td class="nbLine">854</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._oldAppSettings = None</pre></td>
</tr>
<tr class="">
  <td class="nbLine">855</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._defaultScript  = None</pre></td>
</tr>
<tr class="">
  <td class="nbLine">856</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">857</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        orca_state.activeScript = self._getScript(None)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">858</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">859</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # Tell BrlTTY which commands we care about.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">860</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">861</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        braille.setupKeyRanges(orca_state.activeScript.brailleBindings.keys())</pre></td>
</tr>
<tr class="">
  <td class="nbLine">862</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">863</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._registerEventListener("window:activate")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">864</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._registerEventListener("window:deactivate")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">865</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._registerEventListener("object:children-changed:remove")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">866</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">867</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        win = orca_state.activeScript.findActiveWindow()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">868</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        if win:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">869</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # Generate a fake window activation event so the application</pre></td>
</tr>
<tr class="">
  <td class="nbLine">870</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # can tell the user about itself.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">871</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">872</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            e = atspi.Event()</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">873</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            e.source   = win._acc</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">874</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            e.type     = "window:activate"</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">875</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            e.detail1  = 0</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">876</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            e.detail2  = 0</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">877</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            e.any_data = None</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">878</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            self._enqueueEvent(e)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">879</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">880</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def deactivate(self):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">881</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Called when this presentation manager is deactivated."""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">882</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">883</td>
  <td class="nbHits">28</td>
  <td class="src"><pre>        for eventType in self._listenerCounts.keys():</pre></td>
</tr>
<tr class="">
  <td class="nbLine">884</td>
  <td class="nbHits">27</td>
  <td class="src"><pre>            self.registry.deregisterEventListener(self._enqueueEvent,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">885</td>
  <td class="nbHits">27</td>
  <td class="src"><pre>                                                  eventType)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">886</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._listenerCounts = {}</pre></td>
</tr>
<tr class="">
  <td class="nbLine">887</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._knownScripts   = {}</pre></td>
</tr>
<tr class="">
  <td class="nbLine">888</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._knownAppSettings = {}</pre></td>
</tr>
<tr class="">
  <td class="nbLine">889</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._oldAppSettings = None</pre></td>
</tr>
<tr class="">
  <td class="nbLine">890</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        self._defaultScript  = None</pre></td>
</tr>
<tr class="">
  <td class="nbLine">891</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">892</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        orca_state.activeScript = None</pre></td>
</tr>

</tbody>
</table>


<p class="footer">
Report generated by <a href="http://cheeseshop.python.org/pypi/trace2html"
>trace2html</a> on 2007-03-07 09:42:32.904735.
</p>

</body>

</html>
