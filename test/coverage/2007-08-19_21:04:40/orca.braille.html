<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <title>Coverage Report - orca.braille</title>
  <link title="Style" type="text/css" rel="stylesheet" href="trace2html.css"/>
  <script type="text/javascript" src="sortabletable.js"></script>
</head>

<body>
<h1>Coverage Report - orca.braille</h1>

<table id="summary" class="summary">
<thead>
  <tr><td>Module</td><td>Coverage %</td></tr>
</thead>
<tbody>
<tr class=even>
  <td class="moduleName">
    <a href="orca.braille.html">orca.braille</a></td>
  <td class="percent">
    <div class="coveragePercent">
      52%
    </div>
    <div class="coverageBar">
      <div class="inCoverageBar" style="width: 52%">
      </div>
    </div>
  </td>
</tr>

</tbody>
</table>
<script type="text/javascript">
var packageTable = new SortableTable(document.getElementById("summary"),
    ["String", "Percentage"]);
packageTable.sort(0);
</script>


<table class="srcCode">
<tbody>
<tr class="">
  <td class="nbLine">1</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Orca</pre></td>
</tr>
<tr class="">
  <td class="nbLine">2</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">3</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Copyright 2005-2007 Sun Microsystems Inc.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">4</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">5</td>
  <td class="nbHits"></td>
  <td class="src"><pre># This library is free software; you can redistribute it and/or</pre></td>
</tr>
<tr class="">
  <td class="nbLine">6</td>
  <td class="nbHits"></td>
  <td class="src"><pre># modify it under the terms of the GNU Library General Public</pre></td>
</tr>
<tr class="">
  <td class="nbLine">7</td>
  <td class="nbHits"></td>
  <td class="src"><pre># License as published by the Free Software Foundation; either</pre></td>
</tr>
<tr class="">
  <td class="nbLine">8</td>
  <td class="nbHits"></td>
  <td class="src"><pre># version 2 of the License, or (at your option) any later version.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">9</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">10</td>
  <td class="nbHits"></td>
  <td class="src"><pre># This library is distributed in the hope that it will be useful,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">11</td>
  <td class="nbHits"></td>
  <td class="src"><pre># but WITHOUT ANY WARRANTY; without even the implied warranty of</pre></td>
</tr>
<tr class="">
  <td class="nbLine">12</td>
  <td class="nbHits"></td>
  <td class="src"><pre># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</pre></td>
</tr>
<tr class="">
  <td class="nbLine">13</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Library General Public License for more details.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">14</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">15</td>
  <td class="nbHits"></td>
  <td class="src"><pre># You should have received a copy of the GNU Library General Public</pre></td>
</tr>
<tr class="">
  <td class="nbLine">16</td>
  <td class="nbHits"></td>
  <td class="src"><pre># License along with this library; if not, write to the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">17</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Free Software Foundation, Inc., 59 Temple Place - Suite 330,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">18</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Boston, MA 02111-1307, USA.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">19</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">20</td>
  <td class="nbHits"></td>
  <td class="src"><pre>"""A very experimental approach to the refreshable Braille display.  This</pre></td>
</tr>
<tr class="">
  <td class="nbLine">21</td>
  <td class="nbHits"></td>
  <td class="src"><pre>module treats each line of the display as a sequential set of regions, where</pre></td>
</tr>
<tr class="">
  <td class="nbLine">22</td>
  <td class="nbHits"></td>
  <td class="src"><pre>each region can potentially backed by an Accessible object.  Depending upon</pre></td>
</tr>
<tr class="">
  <td class="nbLine">23</td>
  <td class="nbHits"></td>
  <td class="src"><pre>the Accessible object, the cursor routing keys can be used to perform</pre></td>
</tr>
<tr class="">
  <td class="nbLine">24</td>
  <td class="nbHits"></td>
  <td class="src"><pre>operations on the Accessible object, such as invoking default actions or</pre></td>
</tr>
<tr class="">
  <td class="nbLine">25</td>
  <td class="nbHits"></td>
  <td class="src"><pre>moving the text caret.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">26</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>"""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">27</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">28</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>__id__        = "$Id: braille.py 2602 2007-08-08 17:15:07Z shaeger $"</pre></td>
</tr>
<tr class="">
  <td class="nbLine">29</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>__version__   = "$Revision: 2602 $"</pre></td>
</tr>
<tr class="">
  <td class="nbLine">30</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>__date__      = "$Date: 2007-08-08 13:15:07 -0400 (Wed, 08 Aug 2007) $"</pre></td>
</tr>
<tr class="">
  <td class="nbLine">31</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>__copyright__ = "Copyright (c) 2005-2007 Sun Microsystems Inc."</pre></td>
</tr>
<tr class="">
  <td class="nbLine">32</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>__license__   = "LGPL"</pre></td>
</tr>
<tr class="">
  <td class="nbLine">33</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">34</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import logging</pre></td>
</tr>
<tr class="">
  <td class="nbLine">35</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>log = logging.getLogger("braille")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">36</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">37</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import signal</pre></td>
</tr>
<tr class="">
  <td class="nbLine">38</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">39</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import atspi</pre></td>
</tr>
<tr class="">
  <td class="nbLine">40</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">41</td>
  <td class="nbHits"></td>
  <td class="src"><pre># We'll use the official BrlAPI pythons (as of BrlTTY 3.8) if they</pre></td>
</tr>
<tr class="">
  <td class="nbLine">42</td>
  <td class="nbHits"></td>
  <td class="src"><pre># are available.  Otherwise, we'll fall back to our own bindings.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">43</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">44</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">45</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    import brlapi</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">46</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    import gobject</pre></td>
</tr>
<tr class="">
  <td class="nbLine">47</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">48</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    brlAPI = None</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">49</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    useBrlAPIBindings = True</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">50</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    brlAPIRunning = False</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">51</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    brlAPISourceId = 0</pre></td>
</tr>
<tr class="">
  <td class="nbLine">52</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>except:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">53</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    import brl</pre></td>
</tr>
<tr class="">
  <td class="nbLine">54</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    useBrlAPIBindings = False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">55</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    brlAPIRunning = False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">56</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">57</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">58</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # This can fail due to gtk not being available.  We want to</pre></td>
</tr>
<tr class="">
  <td class="nbLine">59</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # be able to recover from that if possible.  The main driver</pre></td>
</tr>
<tr class="">
  <td class="nbLine">60</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # for this is to allow "orca --text-setup" to work even if</pre></td>
</tr>
<tr class="">
  <td class="nbLine">61</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # the desktop is not running.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">62</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">63</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    import brlmon</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">64</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>except:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">65</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    pass</pre></td>
</tr>
<tr class="">
  <td class="nbLine">66</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import debug</pre></td>
</tr>
<tr class="">
  <td class="nbLine">67</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import eventsynthesizer</pre></td>
</tr>
<tr class="">
  <td class="nbLine">68</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import orca_state</pre></td>
</tr>
<tr class="">
  <td class="nbLine">69</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>import settings</pre></td>
</tr>
<tr class="">
  <td class="nbLine">70</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">71</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>from orca_i18n import _                          # for gettext support</pre></td>
</tr>
<tr class="">
  <td class="nbLine">72</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>from rolenames import getShortBrailleForRoleName # localized role names</pre></td>
</tr>
<tr class="">
  <td class="nbLine">73</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>from rolenames import getLongBrailleForRoleName  # localized role names</pre></td>
</tr>
<tr class="">
  <td class="nbLine">74</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">75</td>
  <td class="nbHits"></td>
  <td class="src"><pre># If True, this module has been initialized.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">76</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">77</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>_initialized = False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">78</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">79</td>
  <td class="nbHits"></td>
  <td class="src"><pre># The braille monitor</pre></td>
</tr>
<tr class="">
  <td class="nbLine">80</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">81</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>monitor = None</pre></td>
</tr>
<tr class="">
  <td class="nbLine">82</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">83</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Each of these maps to BrlAPI's brldefs.h file.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">84</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">85</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_NOOP              = 0x00</pre></td>
</tr>
<tr class="">
  <td class="nbLine">86</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_LNUP              = 0x01</pre></td>
</tr>
<tr class="">
  <td class="nbLine">87</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_LNDN              = 0x02</pre></td>
</tr>
<tr class="">
  <td class="nbLine">88</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_WINUP             = 0x03</pre></td>
</tr>
<tr class="">
  <td class="nbLine">89</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_WINDN             = 0x04</pre></td>
</tr>
<tr class="">
  <td class="nbLine">90</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_PRDIFLN           = 0x05</pre></td>
</tr>
<tr class="">
  <td class="nbLine">91</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_NXDIFLN           = 0x06</pre></td>
</tr>
<tr class="">
  <td class="nbLine">92</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_ATTRUP            = 0x07</pre></td>
</tr>
<tr class="">
  <td class="nbLine">93</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_ATTRDN            = 0x08</pre></td>
</tr>
<tr class="">
  <td class="nbLine">94</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_TOP               = 0x09</pre></td>
</tr>
<tr class="">
  <td class="nbLine">95</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_BOT               = 0x0a</pre></td>
</tr>
<tr class="">
  <td class="nbLine">96</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_TOP_LEFT          = 0x0b</pre></td>
</tr>
<tr class="">
  <td class="nbLine">97</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_BOT_LEFT          = 0x0c</pre></td>
</tr>
<tr class="">
  <td class="nbLine">98</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_PRPGRPH           = 0x0d</pre></td>
</tr>
<tr class="">
  <td class="nbLine">99</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_NXPGRPH           = 0x0e</pre></td>
</tr>
<tr class="">
  <td class="nbLine">100</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_PRPROMPT          = 0x0f</pre></td>
</tr>
<tr class="">
  <td class="nbLine">101</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_NXPROMPT          = 0x10</pre></td>
</tr>
<tr class="">
  <td class="nbLine">102</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_PRSEARCH          = 0x11</pre></td>
</tr>
<tr class="">
  <td class="nbLine">103</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_NXSEARCH          = 0x12</pre></td>
</tr>
<tr class="">
  <td class="nbLine">104</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_CHRLT             = 0x13</pre></td>
</tr>
<tr class="">
  <td class="nbLine">105</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_CHRRT             = 0x14</pre></td>
</tr>
<tr class="">
  <td class="nbLine">106</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_HWINLT            = 0x15</pre></td>
</tr>
<tr class="">
  <td class="nbLine">107</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_HWINRT            = 0x16</pre></td>
</tr>
<tr class="">
  <td class="nbLine">108</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_FWINLT            = 0x17</pre></td>
</tr>
<tr class="">
  <td class="nbLine">109</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_FWINRT            = 0x18</pre></td>
</tr>
<tr class="">
  <td class="nbLine">110</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_FWINLTSKIP        = 0x19</pre></td>
</tr>
<tr class="">
  <td class="nbLine">111</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_FWINRTSKIP        = 0x1a</pre></td>
</tr>
<tr class="">
  <td class="nbLine">112</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_LNBEG             = 0x1b</pre></td>
</tr>
<tr class="">
  <td class="nbLine">113</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_LNEND             = 0x1c</pre></td>
</tr>
<tr class="">
  <td class="nbLine">114</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_HOME              = 0x1d</pre></td>
</tr>
<tr class="">
  <td class="nbLine">115</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_BACK              = 0x1e</pre></td>
</tr>
<tr class="">
  <td class="nbLine">116</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_FREEZE            = 0x1f</pre></td>
</tr>
<tr class="">
  <td class="nbLine">117</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_DISPMD            = 0x20</pre></td>
</tr>
<tr class="">
  <td class="nbLine">118</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_SIXDOTS           = 0x21</pre></td>
</tr>
<tr class="">
  <td class="nbLine">119</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_SLIDEWIN          = 0x22</pre></td>
</tr>
<tr class="">
  <td class="nbLine">120</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_SKPIDLNS          = 0x23</pre></td>
</tr>
<tr class="">
  <td class="nbLine">121</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_SKPBLNKWINS       = 0x24</pre></td>
</tr>
<tr class="">
  <td class="nbLine">122</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_CSRVIS            = 0x25</pre></td>
</tr>
<tr class="">
  <td class="nbLine">123</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_CSRHIDE           = 0x26</pre></td>
</tr>
<tr class="">
  <td class="nbLine">124</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_CSRTRK            = 0x27</pre></td>
</tr>
<tr class="">
  <td class="nbLine">125</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_CSRSIZE           = 0x28</pre></td>
</tr>
<tr class="">
  <td class="nbLine">126</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_CSRBLINK          = 0x29</pre></td>
</tr>
<tr class="">
  <td class="nbLine">127</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_ATTRVIS           = 0x2a</pre></td>
</tr>
<tr class="">
  <td class="nbLine">128</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_ATTRBLINK         = 0x2b</pre></td>
</tr>
<tr class="">
  <td class="nbLine">129</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_CAPBLINK          = 0x2c</pre></td>
</tr>
<tr class="">
  <td class="nbLine">130</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_TUNES             = 0x2d</pre></td>
</tr>
<tr class="">
  <td class="nbLine">131</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_HELP              = 0x2e</pre></td>
</tr>
<tr class="">
  <td class="nbLine">132</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_INFO              = 0x2f</pre></td>
</tr>
<tr class="">
  <td class="nbLine">133</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_LEARN             = 0x30</pre></td>
</tr>
<tr class="">
  <td class="nbLine">134</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_PREFMENU          = 0x31</pre></td>
</tr>
<tr class="">
  <td class="nbLine">135</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_PREFSAVE          = 0x32</pre></td>
</tr>
<tr class="">
  <td class="nbLine">136</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_PREFLOAD          = 0x33</pre></td>
</tr>
<tr class="">
  <td class="nbLine">137</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_MENU_FIRST_ITEM   = 0x34</pre></td>
</tr>
<tr class="">
  <td class="nbLine">138</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_MENU_LAST_ITEM    = 0x35</pre></td>
</tr>
<tr class="">
  <td class="nbLine">139</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_MENU_PREV_ITEM    = 0x36</pre></td>
</tr>
<tr class="">
  <td class="nbLine">140</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_MENU_NEXT_ITEM    = 0x37</pre></td>
</tr>
<tr class="">
  <td class="nbLine">141</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_MENU_PREV_SETTING = 0x38</pre></td>
</tr>
<tr class="">
  <td class="nbLine">142</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_MENU_NEXT_SETTING = 0x39</pre></td>
</tr>
<tr class="">
  <td class="nbLine">143</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_SAY_LINE          = 0x3a</pre></td>
</tr>
<tr class="">
  <td class="nbLine">144</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_SAY_ABOVE         = 0x3b</pre></td>
</tr>
<tr class="">
  <td class="nbLine">145</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_SAY_BELOW         = 0x3c</pre></td>
</tr>
<tr class="">
  <td class="nbLine">146</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_MUTE              = 0x3d</pre></td>
</tr>
<tr class="">
  <td class="nbLine">147</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_SPKHOME           = 0x3e</pre></td>
</tr>
<tr class="">
  <td class="nbLine">148</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_SWITCHVT_PREV     = 0x3f</pre></td>
</tr>
<tr class="">
  <td class="nbLine">149</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_SWITCHVT_NEXT     = 0x40</pre></td>
</tr>
<tr class="">
  <td class="nbLine">150</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_CSRJMP_VERT       = 0x41</pre></td>
</tr>
<tr class="">
  <td class="nbLine">151</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_PASTE             = 0x42</pre></td>
</tr>
<tr class="">
  <td class="nbLine">152</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_RESTARTBRL        = 0x43</pre></td>
</tr>
<tr class="">
  <td class="nbLine">153</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_RESTARTSPEECH     = 0x44</pre></td>
</tr>
<tr class="">
  <td class="nbLine">154</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>CMD_MAX               = 0x44</pre></td>
</tr>
<tr class="">
  <td class="nbLine">155</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">156</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>BRL_FLG_REPEAT_INITIAL= 0x800000</pre></td>
</tr>
<tr class="">
  <td class="nbLine">157</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>BRL_FLG_REPEAT_DELAY  = 0x400000</pre></td>
</tr>
<tr class="">
  <td class="nbLine">158</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">159</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Common names for most used BrlTTY commands, to be shown in the GUI:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">160</td>
  <td class="nbHits"></td>
  <td class="src"><pre># ATM, the ones used in default.py are:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">161</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">162</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>command_name = {}</pre></td>
</tr>
<tr class="">
  <td class="nbLine">163</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">164</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Translators: this is a command for a button on a refreshable braille</pre></td>
</tr>
<tr class="">
  <td class="nbLine">165</td>
  <td class="nbHits"></td>
  <td class="src"><pre># display (an external hardware device used by people who are blind).</pre></td>
</tr>
<tr class="">
  <td class="nbLine">166</td>
  <td class="nbHits"></td>
  <td class="src"><pre># When pressing the button, the display scrolls to the left.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">167</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">168</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>command_name[CMD_FWINLT]   = _("Line Left")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">169</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">170</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Translators: this is a command for a button on a refreshable braille</pre></td>
</tr>
<tr class="">
  <td class="nbLine">171</td>
  <td class="nbHits"></td>
  <td class="src"><pre># display (an external hardware device used by people who are blind).</pre></td>
</tr>
<tr class="">
  <td class="nbLine">172</td>
  <td class="nbHits"></td>
  <td class="src"><pre># When pressing the button, the display scrolls to the right.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">173</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">174</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>command_name[CMD_FWINRT]   = _("Line Right")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">175</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">176</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Translators: this is a command for a button on a refreshable braille</pre></td>
</tr>
<tr class="">
  <td class="nbLine">177</td>
  <td class="nbHits"></td>
  <td class="src"><pre># display (an external hardware device used by people who are blind).</pre></td>
</tr>
<tr class="">
  <td class="nbLine">178</td>
  <td class="nbHits"></td>
  <td class="src"><pre># When pressing the button, the display scrolls up.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">179</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">180</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>command_name[CMD_LNUP]     = _("Line Up")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">181</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">182</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Translators: this is a command for a button on a refreshable braille</pre></td>
</tr>
<tr class="">
  <td class="nbLine">183</td>
  <td class="nbHits"></td>
  <td class="src"><pre># display (an external hardware device used by people who are blind).</pre></td>
</tr>
<tr class="">
  <td class="nbLine">184</td>
  <td class="nbHits"></td>
  <td class="src"><pre># When pressing the button, the display scrolls down.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">185</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">186</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>command_name[CMD_LNDN]     = _("Line Down")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">187</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">188</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Translators: this is a command for a button on a refreshable braille</pre></td>
</tr>
<tr class="">
  <td class="nbLine">189</td>
  <td class="nbHits"></td>
  <td class="src"><pre># display (an external hardware device used by people who are blind).</pre></td>
</tr>
<tr class="">
  <td class="nbLine">190</td>
  <td class="nbHits"></td>
  <td class="src"><pre># When pressing the button, the display scrolls to the top left of the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">191</td>
  <td class="nbHits"></td>
  <td class="src"><pre># window.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">192</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">193</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>command_name[CMD_TOP_LEFT] = _("Top Left")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">194</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">195</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Translators: this is a command for a button on a refreshable braille</pre></td>
</tr>
<tr class="">
  <td class="nbLine">196</td>
  <td class="nbHits"></td>
  <td class="src"><pre># display (an external hardware device used by people who are blind).</pre></td>
</tr>
<tr class="">
  <td class="nbLine">197</td>
  <td class="nbHits"></td>
  <td class="src"><pre># When pressing the button, the display scrolls to the bottom right of</pre></td>
</tr>
<tr class="">
  <td class="nbLine">198</td>
  <td class="nbHits"></td>
  <td class="src"><pre># the window.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">199</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">200</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>command_name[CMD_BOT_LEFT] = _("Bottom Right")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">201</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">202</td>
  <td class="nbHits"></td>
  <td class="src"><pre># Translators: this is a command for a button on a refreshable braille</pre></td>
</tr>
<tr class="">
  <td class="nbLine">203</td>
  <td class="nbHits"></td>
  <td class="src"><pre># display (an external hardware device used by people who are blind).</pre></td>
</tr>
<tr class="">
  <td class="nbLine">204</td>
  <td class="nbHits"></td>
  <td class="src"><pre># When pressing the button, the display scrolls to position containing</pre></td>
</tr>
<tr class="">
  <td class="nbLine">205</td>
  <td class="nbHits"></td>
  <td class="src"><pre># the cursor.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">206</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">207</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>command_name[CMD_HOME]     = _("Cursor Position")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">208</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">209</td>
  <td class="nbHits"></td>
  <td class="src"><pre># The size of the physical display (width, height).  The coordinate system of</pre></td>
</tr>
<tr class="">
  <td class="nbLine">210</td>
  <td class="nbHits"></td>
  <td class="src"><pre># the display is set such that the upper left is (0,0), x values increase from</pre></td>
</tr>
<tr class="">
  <td class="nbLine">211</td>
  <td class="nbHits"></td>
  <td class="src"><pre># left to right, and y values increase from top to bottom.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">212</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">213</td>
  <td class="nbHits"></td>
  <td class="src"><pre># For the purposes of testing w/o a braille display, we'll set the display</pre></td>
</tr>
<tr class="">
  <td class="nbLine">214</td>
  <td class="nbHits"></td>
  <td class="src"><pre># size to width=32 and height=1.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">215</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">216</td>
  <td class="nbHits"></td>
  <td class="src"><pre># [[[TODO: WDW - Only a height of 1 is support at this time.]]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">217</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">218</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>_displaySize = [32, 1]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">219</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">220</td>
  <td class="nbHits"></td>
  <td class="src"><pre># The list of lines on the display.  This represents the entire amount of data</pre></td>
</tr>
<tr class="">
  <td class="nbLine">221</td>
  <td class="nbHits"></td>
  <td class="src"><pre># to be drawn on the display.  It will be clipped by the viewport if too large.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">222</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">223</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>_lines = []</pre></td>
</tr>
<tr class="">
  <td class="nbLine">224</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">225</td>
  <td class="nbHits"></td>
  <td class="src"><pre># The region with focus.  This will be displayed at the home position.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">226</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">227</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>_regionWithFocus = None</pre></td>
</tr>
<tr class="">
  <td class="nbLine">228</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">229</td>
  <td class="nbHits"></td>
  <td class="src"><pre># The viewport is a rectangular region of size _displaySize whose upper left</pre></td>
</tr>
<tr class="">
  <td class="nbLine">230</td>
  <td class="nbHits"></td>
  <td class="src"><pre># corner is defined by the point (x, line number).  As such, the viewport is</pre></td>
</tr>
<tr class="">
  <td class="nbLine">231</td>
  <td class="nbHits"></td>
  <td class="src"><pre># identified solely by its upper left point.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">232</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">233</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>_viewport = [0, 0]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">234</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">235</td>
  <td class="nbHits"></td>
  <td class="src"><pre># The callback to call on a BrlTTY input event.  This is passed to</pre></td>
</tr>
<tr class="">
  <td class="nbLine">236</td>
  <td class="nbHits"></td>
  <td class="src"><pre># the init method.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">237</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">238</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>_callback = None</pre></td>
</tr>
<tr class="">
  <td class="nbLine">239</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">240</td>
  <td class="nbHits"></td>
  <td class="src"><pre># If True, the given portion of the currently displayed line is showing</pre></td>
</tr>
<tr class="">
  <td class="nbLine">241</td>
  <td class="nbHits"></td>
  <td class="src"><pre># on the display.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">242</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">243</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>endIsShowing = False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">244</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>beginningIsShowing = False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">245</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">246</td>
  <td class="nbHits"></td>
  <td class="src"><pre># 1-based offset saying which braille cell has the cursor.  A value</pre></td>
</tr>
<tr class="">
  <td class="nbLine">247</td>
  <td class="nbHits"></td>
  <td class="src"><pre># of 0 means no cell has the cursor.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">248</td>
  <td class="nbHits"></td>
  <td class="src"><pre>#</pre></td>
</tr>
<tr class="">
  <td class="nbLine">249</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>cursorCell = 0</pre></td>
</tr>
<tr class="">
  <td class="nbLine">250</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">251</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def _printBrailleEvent(level, command):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">252</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Prints out a Braille event.  The given level may be overridden</pre></td>
</tr>
<tr class="">
  <td class="nbLine">253</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    if the eventDebugLevel (see debug.setEventDebugLevel) is greater in</pre></td>
</tr>
<tr class="">
  <td class="nbLine">254</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    debug.py.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">255</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">256</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">257</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    - command: the BrlAPI command for the key that was pressed.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">258</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">259</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">260</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    debug.printInputEvent(</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">261</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        level,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">262</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        "BRAILLE EVENT: %x" % command)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">263</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">264</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>class Region:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">265</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """A Braille region to be displayed on the display.  The width of</pre></td>
</tr>
<tr class="">
  <td class="nbLine">266</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    each region is determined by its string.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">267</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">268</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">269</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def __init__(self, string, cursorOffset=0):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">270</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Creates a new Region containing the given string.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">271</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">272</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">273</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - string: the string to be displayed</pre></td>
</tr>
<tr class="">
  <td class="nbLine">274</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - cursorOffset: a 0-based index saying where to draw the cursor</pre></td>
</tr>
<tr class="">
  <td class="nbLine">275</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        for this Region if it gets focus.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">276</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">277</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">278</td>
  <td class="nbHits">11969</td>
  <td class="src"><pre>        if not string:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">279</td>
  <td class="nbHits">473</td>
  <td class="src"><pre>            string = ""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">280</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">281</td>
  <td class="nbHits">11969</td>
  <td class="src"><pre>        string = string.decode("UTF-8")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">282</td>
  <td class="nbHits">11969</td>
  <td class="src"><pre>        if string[-1:] == "\n":</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">283</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            string = string[:-1]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">284</td>
  <td class="nbHits">11969</td>
  <td class="src"><pre>        self.string = string.encode("UTF-8")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">285</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">286</td>
  <td class="nbHits">11969</td>
  <td class="src"><pre>        self.cursorOffset = cursorOffset</pre></td>
</tr>
<tr class="">
  <td class="nbLine">287</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">288</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def processRoutingKey(self, offset):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">289</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Processes a cursor routing key press on this Component.  The offset</pre></td>
</tr>
<tr class="">
  <td class="nbLine">290</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        is 0-based, where 0 represents the leftmost character of string</pre></td>
</tr>
<tr class="">
  <td class="nbLine">291</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        associated with this region.  Note that the zeroeth character may have</pre></td>
</tr>
<tr class="">
  <td class="nbLine">292</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        been scrolled off the display."""</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">293</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        pass</pre></td>
</tr>
<tr class="">
  <td class="nbLine">294</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">295</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def getAttributeMask(self):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">296</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Creates a string which can be used as the attrOr field of brltty's</pre></td>
</tr>
<tr class="">
  <td class="nbLine">297</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        write structure for the purpose of indicating text attributes and</pre></td>
</tr>
<tr class="">
  <td class="nbLine">298</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        selection."""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">299</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">300</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # Create an empty mask.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">301</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">302</td>
  <td class="nbHits">24410</td>
  <td class="src"><pre>        mask = ['\x00'] * len(self.string)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">303</td>
  <td class="nbHits">24410</td>
  <td class="src"><pre>        return "".join(mask)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">304</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">305</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>class Component(Region):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">306</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """A subclass of Region backed by an accessible.  This Region will react</pre></td>
</tr>
<tr class="">
  <td class="nbLine">307</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    to any cursor routing key events and perform the default action on the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">308</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    accessible, if a default action exists.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">309</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">310</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">311</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def __init__(self, accessible, string, cursorOffset=0):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">312</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Creates a new Component.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">313</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">314</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">315</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - accessible: the accessible</pre></td>
</tr>
<tr class="">
  <td class="nbLine">316</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - string: the string to use to represent the component</pre></td>
</tr>
<tr class="">
  <td class="nbLine">317</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - cursorOffset: a 0-based index saying where to draw the cursor</pre></td>
</tr>
<tr class="">
  <td class="nbLine">318</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        for this Region if it gets focus.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">319</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">320</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">321</td>
  <td class="nbHits">5446</td>
  <td class="src"><pre>        Region.__init__(self, string, cursorOffset)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">322</td>
  <td class="nbHits">5446</td>
  <td class="src"><pre>        self.accessible = accessible</pre></td>
</tr>
<tr class="">
  <td class="nbLine">323</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">324</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def processRoutingKey(self, offset):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">325</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Processes a cursor routing key press on this Component.  The offset</pre></td>
</tr>
<tr class="">
  <td class="nbLine">326</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        is 0-based, where 0 represents the leftmost character of string</pre></td>
</tr>
<tr class="">
  <td class="nbLine">327</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        associated with this region.  Note that the zeroeth character may have</pre></td>
</tr>
<tr class="">
  <td class="nbLine">328</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        been scrolled off the display."""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">329</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">330</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        actions = self.accessible.action</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">331</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        if actions:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">332</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            actions.doAction(0)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">333</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        else:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">334</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">335</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # [[[WDW - HACK to do a mouse button 1 click if we have</pre></td>
</tr>
<tr class="">
  <td class="nbLine">336</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # to.  For example, page tabs don't have any actions but</pre></td>
</tr>
<tr class="">
  <td class="nbLine">337</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # we want to be able to select them with the cursor</pre></td>
</tr>
<tr class="">
  <td class="nbLine">338</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # routing key.]]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">339</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">340</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">341</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                          "braille.Component.processRoutingKey: no action")</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">342</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            try:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">343</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                eventsynthesizer.clickObject(self.accessible, 1)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">344</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            except:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">345</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.printException(debug.LEVEL_SEVERE)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">346</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">347</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>class Text(Region):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">348</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """A subclass of Region backed by a Text object.  This Region will</pre></td>
</tr>
<tr class="">
  <td class="nbLine">349</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    react to any cursor routing key events by positioning the caret in</pre></td>
</tr>
<tr class="">
  <td class="nbLine">350</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    the associated text object. The line displayed will be the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">351</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    contents of the text object preceded by an optional label.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">352</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    [[[TODO: WDW - need to add in text selection capabilities.  Logged</pre></td>
</tr>
<tr class="">
  <td class="nbLine">353</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    as bugzilla bug 319754.]]]"""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">354</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">355</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def __init__(self, accessible, label=None, eol=""):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">356</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Creates a new Text region.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">357</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">358</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">359</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - accessible: the accessible that implements AccessibleText</pre></td>
</tr>
<tr class="">
  <td class="nbLine">360</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - label: an optional label to display</pre></td>
</tr>
<tr class="">
  <td class="nbLine">361</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">362</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">363</td>
  <td class="nbHits">1320</td>
  <td class="src"><pre>        self.accessible = accessible</pre></td>
</tr>
<tr class="">
  <td class="nbLine">364</td>
  <td class="nbHits">1320</td>
  <td class="src"><pre>        if orca_state.activeScript:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">365</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            [string, self.caretOffset, self.lineOffset] = \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">366</td>
  <td class="nbHits">1320</td>
  <td class="src"><pre>                 orca_state.activeScript.getTextLineAtCaret(self.accessible)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">367</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">368</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # Sometimes, gnome-terminal will give us very odd values when</pre></td>
</tr>
<tr class="">
  <td class="nbLine">369</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # the user is editing using 'vi' and has positioned the caret</pre></td>
</tr>
<tr class="">
  <td class="nbLine">370</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # at the first character of the first line.  In this case, we</pre></td>
</tr>
<tr class="">
  <td class="nbLine">371</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # end up getting a very large negative number for the line offset.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">372</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # So, we just assume the user is at the first character.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">373</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">374</td>
  <td class="nbHits">1320</td>
  <td class="src"><pre>        if self.lineOffset &lt; 0:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">375</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            self.caretOffset = 0</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">376</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            self.lineOffset = 0</pre></td>
</tr>
<tr class="">
  <td class="nbLine">377</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            [string, startOffset, endOffset] = \</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">378</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                self.accessible.text.getTextAtOffset(</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">379</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    0,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">380</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    atspi.Accessibility.TEXT_BOUNDARY_LINE_START)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">381</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">382</td>
  <td class="nbHits">1320</td>
  <td class="src"><pre>        cursorOffset = min(self.caretOffset - self.lineOffset, len(string))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">383</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">384</td>
  <td class="nbHits">1320</td>
  <td class="src"><pre>        self._maxCaretOffset = self.lineOffset + len(string.decode("UTF-8"))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">385</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">386</td>
  <td class="nbHits">1320</td>
  <td class="src"><pre>        self.eol = eol</pre></td>
</tr>
<tr class="">
  <td class="nbLine">387</td>
  <td class="nbHits">1320</td>
  <td class="src"><pre>        string = string + self.eol</pre></td>
</tr>
<tr class="">
  <td class="nbLine">388</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">389</td>
  <td class="nbHits">1320</td>
  <td class="src"><pre>        self.label = label</pre></td>
</tr>
<tr class="">
  <td class="nbLine">390</td>
  <td class="nbHits">1320</td>
  <td class="src"><pre>        if self.label:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">391</td>
  <td class="nbHits">105</td>
  <td class="src"><pre>            string = self.label + " " + string</pre></td>
</tr>
<tr class="">
  <td class="nbLine">392</td>
  <td class="nbHits">105</td>
  <td class="src"><pre>            cursorOffset += len(self.label.decode("UTF-8")) + 1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">393</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">394</td>
  <td class="nbHits">1320</td>
  <td class="src"><pre>        Region.__init__(self, string, cursorOffset)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">395</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">396</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def repositionCursor(self):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">397</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Attempts to reposition the cursor in response to a new</pre></td>
</tr>
<tr class="">
  <td class="nbLine">398</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        caret position.  If it is possible (i.e., the caret is on</pre></td>
</tr>
<tr class="">
  <td class="nbLine">399</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        the same line as it was), reposition the cursor and return</pre></td>
</tr>
<tr class="">
  <td class="nbLine">400</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        True.  Otherwise, return False.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">401</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">402</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">403</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        [string, caretOffset, lineOffset] = \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">404</td>
  <td class="nbHits">1135</td>
  <td class="src"><pre>                 orca_state.activeScript.getTextLineAtCaret(self.accessible)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">405</td>
  <td class="nbHits">1135</td>
  <td class="src"><pre>        cursorOffset = min(caretOffset - lineOffset, len(string))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">406</td>
  <td class="nbHits">1135</td>
  <td class="src"><pre>        if self.label:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">407</td>
  <td class="nbHits">22</td>
  <td class="src"><pre>            cursorOffset += len(self.label.decode("UTF-8")) + 1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">408</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">409</td>
  <td class="nbHits">1135</td>
  <td class="src"><pre>        if lineOffset != self.lineOffset:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">410</td>
  <td class="nbHits">8</td>
  <td class="src"><pre>            return False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">411</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        else:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">412</td>
  <td class="nbHits">1127</td>
  <td class="src"><pre>            self.caretOffset = caretOffset</pre></td>
</tr>
<tr class="">
  <td class="nbLine">413</td>
  <td class="nbHits">1127</td>
  <td class="src"><pre>            self.lineOffset = lineOffset</pre></td>
</tr>
<tr class="">
  <td class="nbLine">414</td>
  <td class="nbHits">1127</td>
  <td class="src"><pre>            self.cursorOffset = cursorOffset</pre></td>
</tr>
<tr class="">
  <td class="nbLine">415</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">416</td>
  <td class="nbHits">1127</td>
  <td class="src"><pre>        return True</pre></td>
</tr>
<tr class="">
  <td class="nbLine">417</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">418</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def processRoutingKey(self, offset):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">419</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Processes a cursor routing key press on this Component.  The offset</pre></td>
</tr>
<tr class="">
  <td class="nbLine">420</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        is 0-based, where 0 represents the leftmost character of text</pre></td>
</tr>
<tr class="">
  <td class="nbLine">421</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        associated with this region.  Note that the zeroeth character may have</pre></td>
</tr>
<tr class="">
  <td class="nbLine">422</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        been scrolled off the display."""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">423</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">424</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        if self.label:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">425</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            offset = offset - len(self.label.decode("UTF-8")) - 1</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">426</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            if offset &lt; 0:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">427</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                return</pre></td>
</tr>
<tr class="">
  <td class="nbLine">428</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">429</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        newCaretOffset = min(self.lineOffset + offset, self._maxCaretOffset)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">430</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        self.accessible.text.setCaretOffset(newCaretOffset)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">431</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">432</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def getAttributeMask(self):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">433</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Creates a string which can be used as the attrOr field of brltty's</pre></td>
</tr>
<tr class="">
  <td class="nbLine">434</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        write structure for the purpose of indicating text attributes and</pre></td>
</tr>
<tr class="">
  <td class="nbLine">435</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        selection."""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">436</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">437</td>
  <td class="nbHits">3767</td>
  <td class="src"><pre>        text = self.accessible.text</pre></td>
</tr>
<tr class="">
  <td class="nbLine">438</td>
  <td class="nbHits">3767</td>
  <td class="src"><pre>        if not text:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">439</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            return ''</pre></td>
</tr>
<tr class="">
  <td class="nbLine">440</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">441</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # Start with an empty mask.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">442</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">443</td>
  <td class="nbHits">3767</td>
  <td class="src"><pre>        stringLength = len(self.string) - len(self.eol)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">444</td>
  <td class="nbHits">3767</td>
  <td class="src"><pre>        attrMask = ['\x00']*stringLength</pre></td>
</tr>
<tr class="">
  <td class="nbLine">445</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">446</td>
  <td class="nbHits">3767</td>
  <td class="src"><pre>        attrIndicator = settings.textAttributesBrailleIndicator</pre></td>
</tr>
<tr class="">
  <td class="nbLine">447</td>
  <td class="nbHits">3767</td>
  <td class="src"><pre>        selIndicator = settings.brailleSelectorIndicator</pre></td>
</tr>
<tr class="">
  <td class="nbLine">448</td>
  <td class="nbHits">3767</td>
  <td class="src"><pre>        indicateAttr = (attrIndicator != settings.TEXT_ATTR_BRAILLE_NONE)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">449</td>
  <td class="nbHits">3767</td>
  <td class="src"><pre>        indicateSel = (selIndicator != settings.BRAILLE_SEL_NONE)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">450</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">451</td>
  <td class="nbHits">3767</td>
  <td class="src"><pre>        if indicateAttr:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">452</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # Identify what attributes the user cares about.  Also get the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">453</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # default attributes for the text object because those attributes</pre></td>
</tr>
<tr class="">
  <td class="nbLine">454</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # may not be included as attributes for the character.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">455</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">456</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            script = orca_state.activeScript</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">457</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            enabledAttributes = settings.enabledBrailledTextAttributes</pre></td>
</tr>
<tr class="">
  <td class="nbLine">458</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            [userAttrList, userAttrDict] = \</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">459</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                script.textAttrsToDictionary(enabledAttributes)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">460</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            defaultAttributes = text.getDefaultAttributes()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">461</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            [defaultAttrList, defaultAttrDict] = \</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">462</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                script.textAttrsToDictionary(defaultAttributes)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">463</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">464</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # [[[TODO - HACK - JD: The end offset returned by SO/OOo is the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">465</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # offset of the first character that doesn't have the attribute</pre></td>
</tr>
<tr class="">
  <td class="nbLine">466</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # in question; all other apps return the offset of the last</pre></td>
</tr>
<tr class="">
  <td class="nbLine">467</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # character that has that attribute]]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">468</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">469</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            adjustment = 0</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">470</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            if orca_state.locusOfFocus.app.name == "soffice.bin":</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">471</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                adjustment += 1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">472</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">473</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            i = self.lineOffset</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">474</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            endOffset = self.lineOffset + stringLength</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">475</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            while i &lt; endOffset - 1:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">476</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                for attribute in userAttrList:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">477</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    defaultValue = None</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">478</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    if attribute in defaultAttrList:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">479</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                        defaultValue = defaultAttrDict[attribute]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">480</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    [value, start, end, defined] = \</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">481</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                            text.getAttributeValue(i, attribute)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">482</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">483</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    notOfInterest = userAttrDict[attribute]</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">484</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    if defined:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">485</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                        weCare = (value != notOfInterest)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">486</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    elif defaultValue and len(notOfInterest):</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">487</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                        weCare = (defaultValue != notOfInterest)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">488</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    else:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">489</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                        weCare = False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">490</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">491</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    if weCare and start &gt;= 0:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">492</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                        maskStart = start - self.lineOffset</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">493</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                        maskEnd = end - self.lineOffset - adjustment</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">494</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                        maskLength = maskEnd - maskStart</pre></td>
</tr>
<tr class="">
  <td class="nbLine">495</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        attrMask[maskStart:maskEnd] = \</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">496</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                                                  [attrIndicator] * maskLength</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">497</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                if (end &lt;= i):</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">498</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    break</pre></td>
</tr>
<tr class="">
  <td class="nbLine">499</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">500</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                i = end</pre></td>
</tr>
<tr class="">
  <td class="nbLine">501</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">502</td>
  <td class="nbHits">3767</td>
  <td class="src"><pre>        if indicateSel:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">503</td>
  <td class="nbHits">3767</td>
  <td class="src"><pre>            nSelections = text.getNSelections()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">504</td>
  <td class="nbHits">3767</td>
  <td class="src"><pre>            if nSelections:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">505</td>
  <td class="nbHits">88</td>
  <td class="src"><pre>                for i in range(0, nSelections):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">506</td>
  <td class="nbHits">44</td>
  <td class="src"><pre>                    [start, end] = text.getSelection(i)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">507</td>
  <td class="nbHits">44</td>
  <td class="src"><pre>                    maskStart = max(self.lineOffset, start) - self.lineOffset</pre></td>
</tr>
<tr class="">
  <td class="nbLine">508</td>
  <td class="nbHits">44</td>
  <td class="src"><pre>                    maskEnd = min(end - self.lineOffset, stringLength)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">509</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    # Combine the selection indicator with the attribute</pre></td>
</tr>
<tr class="">
  <td class="nbLine">510</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    # indicator.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">511</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                    #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">512</td>
  <td class="nbHits">627</td>
  <td class="src"><pre>                    for j in range(maskStart, maskEnd):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">513</td>
  <td class="nbHits">583</td>
  <td class="src"><pre>                        if attrMask[j] != '\x00' \</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">514</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                           and attrMask[j] != selIndicator:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">515</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                            attrMask[j] = '\xc0'</pre></td>
</tr>
<tr class="">
  <td class="nbLine">516</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        else:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">517</td>
  <td class="nbHits">583</td>
  <td class="src"><pre>                            attrMask[j] = selIndicator</pre></td>
</tr>
<tr class="">
  <td class="nbLine">518</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">519</td>
  <td class="nbHits">3767</td>
  <td class="src"><pre>        mask = "".join(attrMask)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">520</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">521</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # Add empty mask characters for the EOL character as well as for</pre></td>
</tr>
<tr class="">
  <td class="nbLine">522</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # any label that might be present.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">523</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">524</td>
  <td class="nbHits">15068</td>
  <td class="src"><pre>        for i in range (0, len(self.eol)):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">525</td>
  <td class="nbHits">11301</td>
  <td class="src"><pre>            mask += '\x00'</pre></td>
</tr>
<tr class="">
  <td class="nbLine">526</td>
  <td class="nbHits">3767</td>
  <td class="src"><pre>        if self.label:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">527</td>
  <td class="nbHits">1929</td>
  <td class="src"><pre>            for i in range (0, len(self.label) + 1):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">528</td>
  <td class="nbHits">1697</td>
  <td class="src"><pre>                mask = '\x00' + mask</pre></td>
</tr>
<tr class="">
  <td class="nbLine">529</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">530</td>
  <td class="nbHits">3767</td>
  <td class="src"><pre>        return mask</pre></td>
</tr>
<tr class="">
  <td class="nbLine">531</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">532</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>class ReviewComponent(Component):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">533</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    """A subclass of Component that is to be used for flat review mode."""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">534</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">535</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def __init__(self, accessible, string, cursorOffset, zone):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">536</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Creates a new Component.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">537</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">538</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">539</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - accessible: the accessible</pre></td>
</tr>
<tr class="">
  <td class="nbLine">540</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - string: the string to use to represent the component</pre></td>
</tr>
<tr class="">
  <td class="nbLine">541</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - cursorOffset: a 0-based index saying where to draw the cursor</pre></td>
</tr>
<tr class="">
  <td class="nbLine">542</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        for this Region if it gets focus.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">543</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - zone: the flat review Zone associated with this component</pre></td>
</tr>
<tr class="">
  <td class="nbLine">544</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">545</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">546</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        Component.__init__(self, accessible, string, cursorOffset)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">547</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        self.zone = zone</pre></td>
</tr>
<tr class="">
  <td class="nbLine">548</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">549</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>class ReviewText(Region):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">550</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """A subclass of Region backed by a Text object.  This Region will</pre></td>
</tr>
<tr class="">
  <td class="nbLine">551</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    does not react to the caret changes, but will react if one updates</pre></td>
</tr>
<tr class="">
  <td class="nbLine">552</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    the cursorPosition.  This class is meant to be used by flat review</pre></td>
</tr>
<tr class="">
  <td class="nbLine">553</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    mode to show the current character position.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">554</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">555</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">556</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def __init__(self, accessible, string, lineOffset, zone):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">557</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Creates a new Text region.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">558</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">559</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">560</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - accessible: the accessible that implements AccessibleText</pre></td>
</tr>
<tr class="">
  <td class="nbLine">561</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - string: the string to use to represent the component</pre></td>
</tr>
<tr class="">
  <td class="nbLine">562</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - lineOffset: the character offset into where the text line starts</pre></td>
</tr>
<tr class="">
  <td class="nbLine">563</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        - zone: the flat review Zone associated with this component</pre></td>
</tr>
<tr class="">
  <td class="nbLine">564</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">565</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">566</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        Region.__init__(self, string)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">567</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        self.accessible = accessible</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">568</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        self.lineOffset = lineOffset</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">569</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        self.zone = zone</pre></td>
</tr>
<tr class="">
  <td class="nbLine">570</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">571</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def processRoutingKey(self, offset):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">572</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Processes a cursor routing key press on this Component.  The offset</pre></td>
</tr>
<tr class="">
  <td class="nbLine">573</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        is 0-based, where 0 represents the leftmost character of text</pre></td>
</tr>
<tr class="">
  <td class="nbLine">574</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        associated with this region.  Note that the zeroeth character may have</pre></td>
</tr>
<tr class="">
  <td class="nbLine">575</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        been scrolled off the display."""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">576</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">577</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        newCaretOffset = self.lineOffset + offset</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">578</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        self.accessible.text.setCaretOffset(newCaretOffset)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">579</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">580</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>class Line:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">581</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """A horizontal line on the display.  Each Line is composed of a sequential</pre></td>
</tr>
<tr class="">
  <td class="nbLine">582</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    set of Regions.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">583</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">584</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">585</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def __init__(self, region=None):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">586</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>        self.regions = []</pre></td>
</tr>
<tr class="">
  <td class="nbLine">587</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>        self.string = ""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">588</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>        if region:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">589</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>            self.addRegion(region)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">590</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">591</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def addRegion(self, region):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">592</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>        self.regions.append(region)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">593</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">594</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def addRegions(self, regions):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">595</td>
  <td class="nbHits">4060</td>
  <td class="src"><pre>        self.regions.extend(regions)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">596</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">597</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def getLineInfo(self):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">598</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Computes the complete string for this line as well as a</pre></td>
</tr>
<tr class="">
  <td class="nbLine">599</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        0-based index where the focused region starts on this line.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">600</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        If the region with focus is not on this line, then the index</pre></td>
</tr>
<tr class="">
  <td class="nbLine">601</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        will be -1.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">602</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">603</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Returns [string, offsetIndex, attributeMask]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">604</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">605</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">606</td>
  <td class="nbHits">5561</td>
  <td class="src"><pre>        string = ""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">607</td>
  <td class="nbHits">5561</td>
  <td class="src"><pre>        focusOffset = -1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">608</td>
  <td class="nbHits">5561</td>
  <td class="src"><pre>        attributeMask = ""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">609</td>
  <td class="nbHits">33738</td>
  <td class="src"><pre>        for region in self.regions:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">610</td>
  <td class="nbHits">28177</td>
  <td class="src"><pre>            if region == _regionWithFocus:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">611</td>
  <td class="nbHits">5561</td>
  <td class="src"><pre>                focusOffset = len(string.decode("UTF-8"))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">612</td>
  <td class="nbHits">28177</td>
  <td class="src"><pre>            if region.string:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">613</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                # [[[TODO: WDW - HACK: Replace UTF-8 ellipses with "..."</pre></td>
</tr>
<tr class="">
  <td class="nbLine">614</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                # The ultimate solution is to get i18n support into</pre></td>
</tr>
<tr class="">
  <td class="nbLine">615</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                # BrlTTY.]]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">616</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">617</td>
  <td class="nbHits">27064</td>
  <td class="src"><pre>                string += region.string.replace("\342\200\246", "...")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">618</td>
  <td class="nbHits">28177</td>
  <td class="src"><pre>            mask = region.getAttributeMask()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">619</td>
  <td class="nbHits">28177</td>
  <td class="src"><pre>            attributeMask += mask</pre></td>
</tr>
<tr class="">
  <td class="nbLine">620</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">621</td>
  <td class="nbHits">5561</td>
  <td class="src"><pre>        return [string, focusOffset, attributeMask]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">622</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">623</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def getRegionAtOffset(self, offset):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">624</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Finds the Region at the given 0-based offset in this line.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">625</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">626</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        Returns the [region, offsetinregion] where the region is</pre></td>
</tr>
<tr class="">
  <td class="nbLine">627</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        the region at the given offset, and offsetinregion is the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">628</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        0-based offset from the beginning of the region, representing</pre></td>
</tr>
<tr class="">
  <td class="nbLine">629</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        where in the region the given offset is."""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">630</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">631</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # Translate the cursor offset for this line into a cursor offset</pre></td>
</tr>
<tr class="">
  <td class="nbLine">632</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # for a region, and then pass the event off to the region for</pre></td>
</tr>
<tr class="">
  <td class="nbLine">633</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # handling.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">634</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">635</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        region = None</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">636</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        string = ""</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">637</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        pos = 0</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">638</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        for region in self.regions:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">639</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            string = string + region.string</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">640</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            if len(string.decode("UTF-8")) &gt; offset:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">641</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                break</pre></td>
</tr>
<tr class="">
  <td class="nbLine">642</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            else:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">643</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                pos = len(string.decode("UTF-8"))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">644</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">645</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        if offset &gt;= len(string.decode("UTF-8")):</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">646</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            return [None, -1]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">647</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        else:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">648</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            return [region, offset - pos]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">649</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">650</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    def processRoutingKey(self, offset):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">651</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Processes a cursor routing key press on this Component.  The offset</pre></td>
</tr>
<tr class="">
  <td class="nbLine">652</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        is 0-based, where 0 represents the leftmost character of string</pre></td>
</tr>
<tr class="">
  <td class="nbLine">653</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        associated with this line.  Note that the zeroeth character may have</pre></td>
</tr>
<tr class="">
  <td class="nbLine">654</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        been scrolled off the display."""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">655</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">656</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        [region, regionOffset] = self.getRegionAtOffset(offset)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">657</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        if region:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">658</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            region.processRoutingKey(regionOffset)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">659</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">660</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def getRegionAtCell(cell):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">661</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Given a 1-based cell offset, return the braille region</pre></td>
</tr>
<tr class="">
  <td class="nbLine">662</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    associated with that cell in the form of [region, offsetinregion]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">663</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    where 'region' is the region associated with the cell and</pre></td>
</tr>
<tr class="">
  <td class="nbLine">664</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    'offsetinregion' is the 0-based offset of where the cell is</pre></td>
</tr>
<tr class="">
  <td class="nbLine">665</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    in the region, where 0 represents the beginning of the region, """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">666</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">667</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    if len(_lines) &gt; 0:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">668</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        offset = (cell - 1) + _viewport[0]</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">669</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        lineNum = _viewport[1]</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">670</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        return _lines[lineNum].getRegionAtOffset(offset)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">671</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    else:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">672</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        return [None, -1]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">673</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">674</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def clear():</pre></td>
</tr>
<tr class="">
  <td class="nbLine">675</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Clears the logical structure, but keeps the Braille display as is</pre></td>
</tr>
<tr class="">
  <td class="nbLine">676</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    (until a refresh operation).</pre></td>
</tr>
<tr class="">
  <td class="nbLine">677</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">678</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">679</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    global _lines</pre></td>
</tr>
<tr class="">
  <td class="nbLine">680</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    global _regionWithFocus</pre></td>
</tr>
<tr class="">
  <td class="nbLine">681</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    global _viewport</pre></td>
</tr>
<tr class="">
  <td class="nbLine">682</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">683</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>    _lines = []</pre></td>
</tr>
<tr class="">
  <td class="nbLine">684</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>    _regionWithFocus = None</pre></td>
</tr>
<tr class="">
  <td class="nbLine">685</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>    _viewport = [0, 0]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">686</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">687</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def setLines(lines):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">688</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    global _lines</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">689</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    _lines = lines</pre></td>
</tr>
<tr class="">
  <td class="nbLine">690</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">691</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def addLine(line):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">692</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Adds a line to the logical display for painting.  The line is added to</pre></td>
</tr>
<tr class="">
  <td class="nbLine">693</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    the end of the current list of known lines.  It is necessary for the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">694</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    viewport to be over the lines and for refresh to be called for the new</pre></td>
</tr>
<tr class="">
  <td class="nbLine">695</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    line to be painted.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">696</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">697</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">698</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    - line: an instance of Line to add.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">699</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">700</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">701</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    global _lines</pre></td>
</tr>
<tr class="">
  <td class="nbLine">702</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">703</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>    _lines.append(line)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">704</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>    line._index = len(_lines)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">705</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">706</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def getShowingLine():</pre></td>
</tr>
<tr class="">
  <td class="nbLine">707</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Returns the Line that is currently being painted on the display.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">708</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">709</td>
  <td class="nbHits">1141</td>
  <td class="src"><pre>    return _lines[_viewport[1]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">710</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">711</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def setFocus(region, panToFocus=True):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">712</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Specififes the region with focus.  This region will be positioned</pre></td>
</tr>
<tr class="">
  <td class="nbLine">713</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    at the home position if panToFocus is True.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">714</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">715</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">716</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    - region: the given region, which much be in a line that has been</pre></td>
</tr>
<tr class="">
  <td class="nbLine">717</td>
  <td class="nbHits"></td>
  <td class="src"><pre>              added to the logical display</pre></td>
</tr>
<tr class="">
  <td class="nbLine">718</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">719</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">720</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    global _regionWithFocus</pre></td>
</tr>
<tr class="">
  <td class="nbLine">721</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">722</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>    _regionWithFocus = region</pre></td>
</tr>
<tr class="">
  <td class="nbLine">723</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">724</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>    if not panToFocus or (not _regionWithFocus):</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">725</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        return</pre></td>
</tr>
<tr class="">
  <td class="nbLine">726</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">727</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # Adjust the viewport according to the new region with focus.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">728</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # The goal is to have the first cell of the region be in the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">729</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # home position, but we will give priority to make sure the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">730</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # cursor for the region is on the display.  For example, when</pre></td>
</tr>
<tr class="">
  <td class="nbLine">731</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # faced with a long text area, we'll show the position with</pre></td>
</tr>
<tr class="">
  <td class="nbLine">732</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # the caret vs. showing the beginning of the region.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">733</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">734</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>    lineNum = 0</pre></td>
</tr>
<tr class="">
  <td class="nbLine">735</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>    done = False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">736</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>    for line in _lines:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">737</td>
  <td class="nbHits">11399</td>
  <td class="src"><pre>        for reg in line.regions:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">738</td>
  <td class="nbHits">11399</td>
  <td class="src"><pre>            if reg == _regionWithFocus:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">739</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>                _viewport[1] = lineNum</pre></td>
</tr>
<tr class="">
  <td class="nbLine">740</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>                done = True</pre></td>
</tr>
<tr class="">
  <td class="nbLine">741</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>                break</pre></td>
</tr>
<tr class="">
  <td class="nbLine">742</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>        if done:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">743</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>            break</pre></td>
</tr>
<tr class="">
  <td class="nbLine">744</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        else:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">745</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            lineNum += 1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">746</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">747</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>    line = _lines[_viewport[1]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">748</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>    [string, offset, attributeMask] = line.getLineInfo()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">749</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">750</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # If the cursor is too far right, we scroll the viewport</pre></td>
</tr>
<tr class="">
  <td class="nbLine">751</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # so the cursor will be on the last cell of the display.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">752</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">753</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>    if _regionWithFocus.cursorOffset &gt;= _displaySize[0]:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">754</td>
  <td class="nbHits">165</td>
  <td class="src"><pre>        offset += _regionWithFocus.cursorOffset - _displaySize[0] + 1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">755</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">756</td>
  <td class="nbHits">2217</td>
  <td class="src"><pre>    _viewport[0] = max(0, offset)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">757</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">758</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def refresh(panToCursor=True, targetCursorCell=0):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">759</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Repaints the Braille on the physical display.  This clips the entire</pre></td>
</tr>
<tr class="">
  <td class="nbLine">760</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    logical structure by the viewport and also sets the cursor to the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">761</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    appropriate location.  [[[TODO: WDW - I'm not sure how BrlTTY handles</pre></td>
</tr>
<tr class="">
  <td class="nbLine">762</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    drawing to displays with more than one line, so I'm only going to handle</pre></td>
</tr>
<tr class="">
  <td class="nbLine">763</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    drawing one line right now.]]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">764</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">765</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">766</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">767</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    - panToCursor: if True, will adjust the viewport so the cursor is</pre></td>
</tr>
<tr class="">
  <td class="nbLine">768</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                   showing.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">769</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    - targetCursorCell: Only effective if panToCursor is True.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">770</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        0 means automatically place the cursor somewhere</pre></td>
</tr>
<tr class="">
  <td class="nbLine">771</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        on the display so as to minimize movement but</pre></td>
</tr>
<tr class="">
  <td class="nbLine">772</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        show as much of the line as possible.  A positive</pre></td>
</tr>
<tr class="">
  <td class="nbLine">773</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        value is a 1-based target cell from the left side</pre></td>
</tr>
<tr class="">
  <td class="nbLine">774</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        of the display and a negative value is a 1-based</pre></td>
</tr>
<tr class="">
  <td class="nbLine">775</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                        target cell from the right side of the display.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">776</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">777</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">778</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    global endIsShowing</pre></td>
</tr>
<tr class="">
  <td class="nbLine">779</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    global beginningIsShowing</pre></td>
</tr>
<tr class="">
  <td class="nbLine">780</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    global cursorCell</pre></td>
</tr>
<tr class="">
  <td class="nbLine">781</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    global monitor</pre></td>
</tr>
<tr class="">
  <td class="nbLine">782</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">783</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    if len(_lines) == 0:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">784</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        if useBrlAPIBindings:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">785</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            if brlAPIRunning:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">786</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                brlAPI.writeText("", 0)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">787</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        else:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">788</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            brl.writeText(0, "")</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">789</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        return</pre></td>
</tr>
<tr class="">
  <td class="nbLine">790</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">791</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # Now determine the location of the cursor.  First, we'll figure</pre></td>
</tr>
<tr class="">
  <td class="nbLine">792</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # out the 1-based offset for where we want the cursor to be.  If</pre></td>
</tr>
<tr class="">
  <td class="nbLine">793</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # the target cell is less than zero, it means an offset from the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">794</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # right hand side of the display.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">795</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">796</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    if targetCursorCell &lt; 0:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">797</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        targetCursorCell = _displaySize[0] + targetCursorCell + 1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">798</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">799</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # Now, we figure out the 0-based offset for where the cursor</pre></td>
</tr>
<tr class="">
  <td class="nbLine">800</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # actually is in the string.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">801</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">802</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    line = _lines[_viewport[1]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">803</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    [string, focusOffset, attributeMask] = line.getLineInfo()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">804</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    cursorOffset = -1</pre></td>
</tr>
<tr class="">
  <td class="nbLine">805</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    if focusOffset &gt;= 0:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">806</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>        cursorOffset = focusOffset + _regionWithFocus.cursorOffset</pre></td>
</tr>
<tr class="">
  <td class="nbLine">807</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">808</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # Now, if desired, we'll automatically pan the viewport to show</pre></td>
</tr>
<tr class="">
  <td class="nbLine">809</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # the cursor.  If there's no targetCursorCell, then we favor the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">810</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # left of the display if we need to pan left, or we favor the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">811</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # right of the display if we need to pan right.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">812</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">813</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    if panToCursor and (cursorOffset &gt;= 0):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">814</td>
  <td class="nbHits">3342</td>
  <td class="src"><pre>        if len(string.decode("UTF-8")) &lt;= _displaySize[0]:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">815</td>
  <td class="nbHits">958</td>
  <td class="src"><pre>            _viewport[0] = 0</pre></td>
</tr>
<tr class="">
  <td class="nbLine">816</td>
  <td class="nbHits">2384</td>
  <td class="src"><pre>        elif targetCursorCell:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">817</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            _viewport[0] = max(0, cursorOffset - targetCursorCell + 1)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">818</td>
  <td class="nbHits">2384</td>
  <td class="src"><pre>        elif cursorOffset &lt; _viewport[0]:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">819</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            _viewport[0] = max(0, cursorOffset)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">820</td>
  <td class="nbHits">2384</td>
  <td class="src"><pre>        elif cursorOffset &gt;= (_viewport[0] + _displaySize[0]):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">821</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>            _viewport[0] = max(0, cursorOffset - _displaySize[0] + 1)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">822</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">823</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    startPos = _viewport[0]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">824</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    endPos = startPos + _displaySize[0]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">825</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">826</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # Now normalize the cursor position to BrlTTY, which uses 1 as</pre></td>
</tr>
<tr class="">
  <td class="nbLine">827</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # the first cursor position as opposed to 0.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">828</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">829</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    cursorCell = cursorOffset - startPos</pre></td>
</tr>
<tr class="">
  <td class="nbLine">830</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    if (cursorCell &lt; 0) or (cursorCell &gt;= _displaySize[0]):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">831</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>        cursorCell = 0</pre></td>
</tr>
<tr class="">
  <td class="nbLine">832</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    else:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">833</td>
  <td class="nbHits">3342</td>
  <td class="src"><pre>        cursorCell += 1 # Normalize to 1-based offset</pre></td>
</tr>
<tr class="">
  <td class="nbLine">834</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">835</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    debug.println(debug.LEVEL_INFO, "BRAILLE LINE:  '%s'" % string)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">836</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    debug.println(debug.LEVEL_INFO, "     VISIBLE:  '%s', cursor=%d" \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">837</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>                  % (string[startPos:endPos], cursorCell))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">838</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">839</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    log.info("refresh line='%s', visible='%s', cursor=%d" \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">840</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>             % (string, string[startPos:endPos], cursorCell))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">841</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">842</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    string = string.decode("UTF-8")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">843</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    substring = string[startPos:endPos].encode("UTF-8")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">844</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    if useBrlAPIBindings:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">845</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        if brlAPIRunning:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">846</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">847</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                # The name after (and including) BrlTTY v3.8 revision 2810</pre></td>
</tr>
<tr class="">
  <td class="nbLine">848</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">849</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                writeStruct = brlapi.WriteStruct()</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">850</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            except:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">851</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                # The name before BrlTTY v3.8 revision 2810</pre></td>
</tr>
<tr class="">
  <td class="nbLine">852</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">853</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                writeStruct = brlapi.Write()</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">854</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            writeStruct.regionBegin = 1</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">855</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            writeStruct.regionSize = len(substring.decode("UTF-8"))</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">856</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            while writeStruct.regionSize &lt; _displaySize[0]:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">857</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                substring += " "</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">858</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                if attributeMask:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">859</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    attributeMask += '\x00'</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">860</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                writeStruct.regionSize += 1</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">861</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            writeStruct.text = substring</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">862</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            writeStruct.cursor = cursorCell</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">863</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            writeStruct.charset = "UTF-8"</pre></td>
</tr>
<tr class="">
  <td class="nbLine">864</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">865</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # [[[WDW - if you want to muck around with the dots on the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">866</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # display to do things such as add underlines, you can use</pre></td>
</tr>
<tr class="">
  <td class="nbLine">867</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # the attrOr field of the write structure to do so.  The</pre></td>
</tr>
<tr class="">
  <td class="nbLine">868</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # attrOr field is a string whose length must be the same</pre></td>
</tr>
<tr class="">
  <td class="nbLine">869</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # length as the display and whose dots will end up showing</pre></td>
</tr>
<tr class="">
  <td class="nbLine">870</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # up on the display.  Each character represents a bitfield</pre></td>
</tr>
<tr class="">
  <td class="nbLine">871</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # where each bit corresponds to a dot (i.e., bit 0 = dot 1,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">872</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # bit 1 = dot 2, and so on).  Here's an example that underlines</pre></td>
</tr>
<tr class="">
  <td class="nbLine">873</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # all the text.]]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">874</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">875</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #myUnderline = ""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">876</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #for i in range(0, _displaySize[0]):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">877</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #    myUnderline += '\xc0'</pre></td>
</tr>
<tr class="">
  <td class="nbLine">878</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #writeStruct.attrOr = myUnderline</pre></td>
</tr>
<tr class="">
  <td class="nbLine">879</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">880</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            if attributeMask:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">881</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                writeStruct.attrOr = attributeMask[startPos:endPos]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">882</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">883</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            brlAPI.write(writeStruct)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">884</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    else:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">885</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>        brl.writeText(cursorCell, substring)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">886</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">887</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    if settings.enableBrailleMonitor:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">888</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        if not monitor:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">889</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            monitor = brlmon.BrlMon(_displaySize[0])</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">890</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            monitor.show_all()</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">891</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        if attributeMask:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">892</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            subMask = attributeMask[startPos:endPos]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">893</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        else:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">894</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            subMask = None</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">895</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        monitor.writeText(cursorCell, substring, subMask)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">896</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    elif monitor:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">897</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        monitor.destroy()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">898</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">899</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    beginningIsShowing = startPos == 0</pre></td>
</tr>
<tr class="">
  <td class="nbLine">900</td>
  <td class="nbHits">3344</td>
  <td class="src"><pre>    endIsShowing = endPos &gt;= len(string)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">901</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">902</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def displayRegions(regionInfo):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">903</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Displays a list of regions on a single line, setting focus to the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">904</td>
  <td class="nbHits"></td>
  <td class="src"><pre>       specified region.  The regionInfo parameter is something that is</pre></td>
</tr>
<tr class="">
  <td class="nbLine">905</td>
  <td class="nbHits"></td>
  <td class="src"><pre>       typically returned by a call to braillegenerator.getBrailleRegions.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">906</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">907</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">908</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    - regionInfo: a list where the first element is a list of regions</pre></td>
</tr>
<tr class="">
  <td class="nbLine">909</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                  to display and the second element is the region</pre></td>
</tr>
<tr class="">
  <td class="nbLine">910</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                  with focus (must be in the list from element 0)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">911</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">912</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">913</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    regions = regionInfo[0]</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">914</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    focusedRegion = regionInfo[1]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">915</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">916</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    clear()</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">917</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    line = Line()</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">918</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    for item in regions:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">919</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        line.addRegion(item)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">920</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    addLine(line)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">921</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    setFocus(focusedRegion)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">922</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    refresh()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">923</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">924</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def displayMessage(message, cursor=-1):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">925</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Displays a single line, setting the cursor to the given position,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">926</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    ensuring that the cursor is in view.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">927</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">928</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">929</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    - message: the string to display</pre></td>
</tr>
<tr class="">
  <td class="nbLine">930</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    - cursor: the 0-based cursor position, where -1 (default) means no cursor</pre></td>
</tr>
<tr class="">
  <td class="nbLine">931</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">932</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">933</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>    clear()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">934</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>    region = Region(message, cursor)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">935</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>    addLine(Line(region))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">936</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>    setFocus(region)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">937</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>    refresh(True)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">938</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">939</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def panLeft(panAmount=0):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">940</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Pans the display to the left, limiting the pan to the beginning</pre></td>
</tr>
<tr class="">
  <td class="nbLine">941</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    of the line being displayed.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">942</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">943</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">944</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    - panAmount: the amount to pan.  A value of 0 means the entire</pre></td>
</tr>
<tr class="">
  <td class="nbLine">945</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                 width of the physical display.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">946</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">947</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    Returns True if a pan actually happened.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">948</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">949</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">950</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    oldX = _viewport[0]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">951</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">952</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    if panAmount == 0:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">953</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        panAmount = _displaySize[0]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">954</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">955</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    if _viewport[0] &gt; 0:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">956</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        _viewport[0] = max(0, _viewport[0] - panAmount)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">957</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">958</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    return oldX != _viewport[0]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">959</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">960</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def panRight(panAmount=0):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">961</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Pans the display to the right, limiting the pan to the length</pre></td>
</tr>
<tr class="">
  <td class="nbLine">962</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    of the line being displayed.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">963</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">964</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">965</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    - panAmount: the amount to pan.  A value of 0 means the entire</pre></td>
</tr>
<tr class="">
  <td class="nbLine">966</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                 width of the physical display.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">967</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">968</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    Returns True if a pan actually happened.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">969</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">970</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">971</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    oldX = _viewport[0]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">972</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">973</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    if panAmount == 0:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">974</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        panAmount = _displaySize[0]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">975</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">976</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    if len(_lines) &gt; 0:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">977</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        lineNum = _viewport[1]</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">978</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        newX = _viewport[0] + panAmount</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">979</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        [string, focusOffset, attributeMask] = _lines[lineNum].getLineInfo()</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">980</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        if newX &lt; len(string.decode("UTF-8")):</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">981</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            _viewport[0] = newX</pre></td>
</tr>
<tr class="">
  <td class="nbLine">982</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">983</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    return oldX != _viewport[0]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">984</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">985</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def panToOffset(offset):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">986</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Automatically pan left or right to make sure the current offset is</pre></td>
</tr>
<tr class="">
  <td class="nbLine">987</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    showing."""</pre></td>
</tr>
<tr class="">
  <td class="nbLine">988</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">989</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    while offset &lt; _viewport[0]:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">990</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">991</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                      "braille.panToOffset (left) %d" % offset)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">992</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        if not panLeft():</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">993</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            break</pre></td>
</tr>
<tr class="">
  <td class="nbLine">994</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">995</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    while offset &gt;= (_viewport[0] + _displaySize[0]):</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">996</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">997</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                      "braille.panToOffset (right) %d" % offset)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">998</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        if not panRight():</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">999</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            break</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1000</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1001</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def returnToRegionWithFocus(inputEvent=None):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1002</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Pans the display so the region with focus is displayed.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1003</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1004</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1005</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    - inputEvent: the InputEvent instance that caused this to be called.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1006</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1007</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    Returns True to mean the command should be consumed.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1008</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1009</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1010</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    setFocus(_regionWithFocus)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1011</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    refresh(True)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1012</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1013</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    return True</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1014</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1015</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def _processBrailleEvent(command):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1016</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Handles BrlTTY command events.  This passes commands on to Orca for</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1017</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    processing.  If Orca does not handle them (as indicated by a return value</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1018</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    of false from the callback passed to init, it will attempt to handle the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1019</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    command itself - either by panning the viewport or passing cursor routing</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1020</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    keys to the Regions for handling.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1021</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1022</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1023</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    - command: the BrlAPI command for the key that was pressed.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1024</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1025</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1026</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    _printBrailleEvent(debug.LEVEL_FINE, command)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1027</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1028</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # [[[TODO: WDW - DaveM suspects the Alva driver is sending us a</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1029</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # repeat flag.  So...let's kill a couple birds here until BrlTTY</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1030</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # 3.8 fixes the problem: we'll disable autorepeat and we'll also</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1031</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # strip out the autorepeat flag if this is the first press of a</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1032</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # button.]]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1033</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1034</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    if command &amp; BRL_FLG_REPEAT_INITIAL:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1035</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        command &amp;= ~(BRL_FLG_REPEAT_INITIAL | BRL_FLG_REPEAT_DELAY)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1036</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    elif command &amp; BRL_FLG_REPEAT_DELAY:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1037</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        return True</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1038</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1039</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    consumed = False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1040</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1041</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    if settings.timeoutCallback and (settings.timeoutTime &gt; 0):</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1042</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        signal.signal(signal.SIGALRM, settings.timeoutCallback)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1043</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        signal.alarm(settings.timeoutTime)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1044</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1045</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    if _callback:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1046</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1047</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # Like key event handlers, a return value of True means</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1048</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # the command was consumed.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1049</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1050</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            consumed = _callback(command)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1051</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        except:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1052</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.printException(debug.LEVEL_WARNING)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1053</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            consumed = False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1054</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1055</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    if (command &gt;= 0x100) and (command &lt; (0x100 + _displaySize[0])):</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1056</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        if len(_lines) &gt; 0:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1057</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            cursor = (command - 0x100) + _viewport[0]</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1058</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            lineNum = _viewport[1]</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1059</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            _lines[lineNum].processRoutingKey(cursor)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1060</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            consumed = True</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1061</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1062</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    if settings.timeoutCallback and (settings.timeoutTime &gt; 0):</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1063</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        signal.alarm(0)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1064</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1065</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    return consumed</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1066</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1067</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def _brlAPIKeyReader(source, condition):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1068</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """Method to read a key from the BrlAPI bindings.  This is a</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1069</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        gobject IO watch handler.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1070</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        """</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1071</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        key = brlAPI.readKey(False)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1072</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        if key:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1073</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            flags = key &gt;&gt; 32</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1074</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            lower = key &amp; 0xFFFFFFFF</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1075</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            keyType = lower &gt;&gt; 29</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1076</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            keyCode = lower &amp; 0x1FFFFFFF</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1077</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1078</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # [[TODO: WDW - HACK If we have a cursor routing key, map</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1079</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # it back to the code we used to get with earlier versions</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1080</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # of BrlAPI (i.e., bit 0x100 was the indicator of a cursor</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1081</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # routing key instead of 0x1000).  This may change before</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1082</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # the offical BrlAPI Python bindings are released.]]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1083</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1084</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            if keyCode &amp; 0x10000:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1085</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                keyCode = 0x100 | (keyCode &amp; 0xFF)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1086</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            if keyCode:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1087</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                _processBrailleEvent(keyCode)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1088</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        return brlAPIRunning</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1089</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1090</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def setupKeyRanges(keys):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1091</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Hacky method to tell BrlTTY what to send and not send us via</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1092</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    the readKey method.  This only works with BrlTTY v3.8 and better.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1093</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1094</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1095</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    -keys: a list of BrlAPI commands.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1096</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1097</td>
  <td class="nbHits">358</td>
  <td class="src"><pre>    if not brlAPIRunning:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1098</td>
  <td class="nbHits">358</td>
  <td class="src"><pre>        return</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1099</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1100</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1101</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # First, start by ignoring everything.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1102</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1103</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        brlAPI.ignoreKeys(brlapi.rangeType_all, [0])</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1104</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1105</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # Next, enable cursor routing keys.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1106</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1107</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        keySet = [brlapi.KEY_TYPE_CMD | brlapi.KEY_CMD_ROUTE]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1108</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1109</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        # Finally, enable the commands we care about.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1110</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1111</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        for key in keys:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1112</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            keySet.append(brlapi.KEY_TYPE_CMD | key)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1113</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1114</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        brlAPI.acceptKeys(brlapi.rangeType_command, keySet)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1115</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1116</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        debug.println(debug.LEVEL_FINEST, "Using BrlAPI v0.5.0+")</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1117</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    except:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1118</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        debug.printException(debug.LEVEL_FINEST)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1119</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1120</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # Old, incompatible way that was in v3.8 devel, but</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1121</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # changed prior to release.  We need this just in case</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1122</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # people have not updated yet.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1123</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1124</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # First, start by ignoring everything.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1125</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1126</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            brlAPI.ignoreKeyRange(0,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1127</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                                  brlapi.KEY_FLAGS_MASK \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1128</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                                  | brlapi.KEY_TYPE_MASK \</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1129</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                                  | brlapi.KEY_CODE_MASK)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1130</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1131</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # Next, enable cursor routing keys.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1132</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1133</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            brlAPI.acceptKeyRange(brlapi.KEY_TYPE_CMD | brlapi.KEY_CMD_ROUTE,</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1134</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                                  brlapi.KEY_TYPE_CMD \</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1135</td>
  <td class="nbHits"></td>
  <td class="src"><pre>                                  | brlapi.KEY_CMD_ROUTE \</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1136</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                                  | brlapi.KEY_CMD_ARG_MASK)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1137</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1138</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            # Finally, enable the commands we care about.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1139</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            #</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1140</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            keySet = []</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1141</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            for key in keys:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1142</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                keySet.append(brlapi.KEY_TYPE_CMD | key)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1143</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            if len(keySet):</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1144</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                brlAPI.acceptKeySet(keySet)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1145</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1146</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.println(debug.LEVEL_FINEST,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1147</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                          "Using BrlAPI pre-release v0.5.0")</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1148</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        except:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1149</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.printException(debug.LEVEL_FINEST)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1150</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.println(</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1151</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.LEVEL_WARNING,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1152</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                "Braille module cannot listen for braille input events")</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1153</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1154</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def init(callback=None, tty=7):</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1155</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Initializes the braille module, connecting to the BrlTTY driver.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1156</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1157</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    Arguments:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1158</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    - callback: the method to call with a BrlTTY input event.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1159</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    - tty: the tty port to take ownership of (default = 7)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1160</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    Returns True if the initialization procedure was run or False if this</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1161</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    module has already been initialized.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1162</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1163</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1164</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    global _initialized</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1165</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    global _displaySize</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1166</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    global _callback</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1167</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1168</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    if _initialized:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1169</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        return False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1170</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1171</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    _callback = callback</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1172</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1173</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>    if useBrlAPIBindings:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1174</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        try:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1175</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            global brlAPI</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1176</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            global brlAPIRunning</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1177</td>
  <td class="nbHits"></td>
  <td class="src"><pre>            global brlAPISourceId</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1178</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1179</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            gobject.threads_init()</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1180</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            brlAPI = brlapi.Connection()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1181</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1182</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            try:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1183</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                import os</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1184</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                windowPath = os.environ["WINDOWPATH"]</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1185</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                brlAPI.enterTtyModeWithPath()</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1186</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                brlAPIRunning = True</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1187</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.println(\</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1188</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    debug.LEVEL_CONFIGURATION,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1189</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    "Braille module has been initialized using WINDOWPATH=" \</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1190</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    + "%s" % windowPath)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1191</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            except:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1192</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                brlAPI.enterTtyMode(tty)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1193</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                brlAPIRunning = True</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1194</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                debug.println(\</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1195</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    debug.LEVEL_CONFIGURATION,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1196</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                    "Braille module has been initialized using tty=%d" % tty)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1197</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            brlAPISourceId = gobject.io_add_watch(brlAPI.fileDescriptor,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1198</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                                                  gobject.IO_IN,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1199</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                                                  _brlAPIKeyReader)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1200</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        except:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1201</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.printException(debug.LEVEL_FINEST)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1202</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            return False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1203</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    else:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1204</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>        if brl.init(tty):</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1205</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.println(debug.LEVEL_CONFIGURATION,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1206</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                          "Braille module has been initialized.")</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1207</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            brl.registerCallback(_processBrailleEvent)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1208</td>
  <td class="nbHits"></td>
  <td class="src"><pre>        else:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1209</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            debug.println(debug.LEVEL_CONFIGURATION,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1210</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                          "Braille module has NOT been initialized.")</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1211</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            return False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1212</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1213</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # [[[TODO: WDW - For some reason, BrlTTY wants to say the height of the</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1214</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    # Vario is 40 so we hardcode it to 1 for now.]]]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1215</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1216</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    #_displaySize = (brl.getDisplayWidth(), brl.getDisplayHeight())</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1217</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    if useBrlAPIBindings:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1218</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        (x, y) = brlAPI.displaySize</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1219</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        _displaySize = [x, 1]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1220</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    else:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1221</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        _displaySize = [brl.getDisplayWidth(), 1]</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1222</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1223</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    debug.println(debug.LEVEL_CONFIGURATION,</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1224</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                  "braille display size = (%d, %d)" \</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1225</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>                  % (_displaySize[0], _displaySize[1]))</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1226</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1227</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    clear()</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1228</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    refresh(True)</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1229</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1230</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    _initialized = True</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1231</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1232</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    return True</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1233</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1234</td>
  <td class="nbHits">1</td>
  <td class="src"><pre>def shutdown():</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1235</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """Shuts down the braille module.   Returns True if the shutdown procedure</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1236</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    was run or False if this module has not been initialized.</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1237</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    """</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1238</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1239</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    global _initialized</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1240</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1241</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>    if not _initialized:</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1242</td>
  <td class="nbHits">2</td>
  <td class="src"><pre>        return False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1243</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="">
  <td class="nbLine">1244</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    global brlAPIRunning</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1245</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    global brlAPISourceId</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1246</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1247</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    if useBrlAPIBindings:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1248</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        if brlAPIRunning:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1249</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            brlAPIRunning = False</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1250</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            gobject.source_remove(brlAPISourceId)</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1251</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            brlAPISourceId = 0</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1252</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>            brlAPI.leaveTtyMode()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1253</td>
  <td class="nbHits"></td>
  <td class="src"><pre>    else:</pre></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1254</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>        brl.shutdown()</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1255</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1256</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    _initialized = False</pre></td>
</tr>
<tr class="">
  <td class="nbLine">1257</td>
  <td class="nbHits"></td>
  <td class="src"></td>
</tr>
<tr class="uncovered">
  <td class="nbLine">1258</td>
  <td class="nbHits">0</td>
  <td class="src"><pre>    return True</pre></td>
</tr>

</tbody>
</table>


<p class="footer">
Report generated by <a href="http://cheeseshop.python.org/pypi/trace2html"
>trace2html</a> on 2007-08-19 21:25:08.931609.
</p>

</body>

</html>
